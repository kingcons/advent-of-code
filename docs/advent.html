<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>Advent of Code</title>
<link type='text/css' href='style.css' rel='stylesheet'/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<script src="jquery.min.js"></script>
<script src="toc.min.js"></script>
<script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       tex2jax: {
         inlineMath: [['$','$']],
         processEscapes: true
       }
     });
   </script>
   <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
   </script>
   </head>
<body>
<div id="content-container">
<div id="toc">
<div id="page-toc">
</div>
<div id="toc-footer"><ul><li><a href="https://github.com/melisgl/mgl-pax">[generated by MGL-PAX]</a></li></ul></div>
</div>
<div id="content">
<p><a id="x-28AOC-3A-40ADVENT-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC:@ADVENT%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@LINKS%20MGL-PAX:SECTION" title="Links">&#8594;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/main.lisp#L112">&#955;</a></span></span></p>

<h1><a href="#AOC:@ADVENT%20MGL-PAX:SECTION">Advent of Code</a></h1>

<h2>Table of Contents</h2>

<ul>
<li><a href="#AOC:@LINKS%20MGL-PAX:SECTION" title="Links">1 Links</a></li>
<li><a href="#AOC:@BACKGROUND%20MGL-PAX:SECTION" title="Background">2 Background</a></li>
<li><a href="#AOC:@STRUCTURE%20MGL-PAX:SECTION" title="Structure">3 Structure</a></li>
<li><a href="#AOC.UTIL:@AOC.UTIL%20MGL-PAX:SECTION" title="Utilities">4 Utilities</a></li>
<li><a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">5 Advent 2022</a>

<ul>
<li><a href="#AOC.2022.01:@2022.01%20MGL-PAX:SECTION" title="Calorie Counting">5.1 Calorie Counting</a></li>
<li><a href="#AOC.2022.02:@2022.02%20MGL-PAX:SECTION" title="Rock Paper Scissors">5.2 Rock Paper Scissors</a></li>
<li><a href="#AOC.2022.03:@2022.03%20MGL-PAX:SECTION" title="Rucksack Reorganization">5.3 Rucksack Reorganization</a></li>
<li><a href="#AOC.2022.04:@2022.04%20MGL-PAX:SECTION" title="Camp Cleanup">5.4 Camp Cleanup</a></li>
<li><a href="#AOC.2022.05:@2022.05%20MGL-PAX:SECTION" title="Supply Stacks">5.5 Supply Stacks</a></li>
<li><a href="#AOC.2022.06:@2022.06%20MGL-PAX:SECTION" title="Tuning Trouble">5.6 Tuning Trouble</a></li>
<li><a href="#AOC.2022.07:@2022.07%20MGL-PAX:SECTION" title="No Space Left on Device">5.7 No Space Left on Device</a></li>
<li><a href="#AOC.2022.08:@2022.08%20MGL-PAX:SECTION" title="Treetop Tree House">5.8 Treetop Tree House</a></li>
<li><a href="#AOC.2022.09:@2022.09%20MGL-PAX:SECTION" title="Rope Bridge">5.9 Rope Bridge</a></li>
<li><a href="#AOC.2022.10:@2022.10%20MGL-PAX:SECTION" title="Cathode-Ray Tube">5.10 Cathode-Ray Tube</a></li>
<li><a href="#AOC.2022.11:@2022.11%20MGL-PAX:SECTION" title="Monkey in the Middle">5.11 Monkey in the Middle</a></li>
<li><a href="#AOC.2022.12:@2022.12%20MGL-PAX:SECTION" title="Hill Climbing Algorithm">5.12 Hill Climbing Algorithm</a></li>
<li><a href="#AOC.2022.13:@2022.13%20MGL-PAX:SECTION" title="Distress Signal">5.13 Distress Signal</a></li>
<li><a href="#AOC.2022.14:@2022.14%20MGL-PAX:SECTION" title="Regolith Reservoir">5.14 Regolith Reservoir</a></li>
</ul></li>
<li><a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">6 Advent 2021</a>

<ul>
<li><a href="#AOC.2021.01:@2021.01%20MGL-PAX:SECTION" title="Sonar Sweep">6.1 Sonar Sweep</a></li>
<li><a href="#AOC.2021.02:@2021.02%20MGL-PAX:SECTION" title="Dive!">6.2 Dive!</a></li>
<li><a href="#AOC.2021.03:@2021.03%20MGL-PAX:SECTION" title="Binary Diagnostic">6.3 Binary Diagnostic</a></li>
<li><a href="#AOC.2021.04:@2021.04%20MGL-PAX:SECTION" title="Giant Squid">6.4 Giant Squid</a></li>
<li><a href="#AOC.2021.05:@2021.05%20MGL-PAX:SECTION" title="Hydrothermal Venture">6.5 Hydrothermal Venture</a></li>
<li><a href="#AOC.2021.06:@2021.06%20MGL-PAX:SECTION" title="Lanternfish">6.6 Lanternfish</a></li>
<li><a href="#AOC.2021.07:@2021.07%20MGL-PAX:SECTION" title="The Treachery of Whales">6.7 The Treachery of Whales</a></li>
<li><a href="#AOC.2021.08:@2021.08%20MGL-PAX:SECTION" title="Seven Segment Search">6.8 Seven Segment Search</a></li>
<li><a href="#AOC.2021.09:@2021.09%20MGL-PAX:SECTION" title="Smoke Basin">6.9 Smoke Basin</a></li>
<li><a href="#AOC.2021.10:@2021.10%20MGL-PAX:SECTION" title="Syntax Scoring">6.10 Syntax Scoring</a></li>
<li><a href="#AOC.2021.11:@2021.11%20MGL-PAX:SECTION" title="Dumbo Octopuses">6.11 Dumbo Octopuses</a></li>
</ul></li>
<li><a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">7 Advent 2020</a>

<ul>
<li><a href="#AOC.2020.01:@2020.01%20MGL-PAX:SECTION" title="Report Repair">7.1 Report Repair</a></li>
<li><a href="#AOC.2020.02:@2020.02%20MGL-PAX:SECTION" title="Password Philosophy">7.2 Password Philosophy</a></li>
<li><a href="#AOC.2020.03:@2020.03%20MGL-PAX:SECTION" title="Toboggan Trajectory">7.3 Toboggan Trajectory</a></li>
<li><a href="#AOC.2020.04:@2020.04%20MGL-PAX:SECTION" title="Passport Processing">7.4 Passport Processing</a></li>
<li><a href="#AOC.2020.05:@2020.05%20MGL-PAX:SECTION" title="Binary Boarding">7.5 Binary Boarding</a></li>
<li><a href="#AOC.2020.06:@2020.06%20MGL-PAX:SECTION" title="Custom Customs">7.6 Custom Customs</a></li>
<li><a href="#AOC.2020.07:@2020.07%20MGL-PAX:SECTION" title="Handy Haversacks">7.7 Handy Haversacks</a></li>
<li><a href="#AOC.2020.08:@2020.08%20MGL-PAX:SECTION" title="Handheld Halt">7.8 Handheld Halt</a></li>
<li><a href="#AOC.2020.09:@2020.09%20MGL-PAX:SECTION" title="Encoding Error">7.9 Encoding Error</a></li>
</ul></li>
<li><a href="#AOC:@AOC.2019%20MGL-PAX:SECTION" title="Advent 2019">8 Advent 2019</a>

<ul>
<li><a href="#AOC.2019.01:@2019.01%20MGL-PAX:SECTION" title="The Tyranny of the Rocket Equation">8.1 The Tyranny of the Rocket Equation</a></li>
</ul></li>
</ul>

<h6>[in package AOC]</h6>

<p><a id="x-28AOC-3A-40LINKS-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC:@LINKS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8592;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8593;</a> <a href="#AOC:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8594;</a> <a href="#AOC:@LINKS%20MGL-PAX:SECTION" title="Links">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/main.lisp#L12">&#955;</a></span></span></p>

<h2><a href="#AOC:@LINKS%20MGL-PAX:SECTION">1 Links</a></h2>

<p>Here is the <a href="https://github.com/kingcons/advent-of-code" >github repo</a> and
here is the <a href="https://kingcons.github.io/advent-of-code" >website</a>.</p>

<p><a id="x-28AOC-3A-40BACKGROUND-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC:@BACKGROUND%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@LINKS%20MGL-PAX:SECTION" title="Links">&#8592;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8593;</a> <a href="#AOC:@STRUCTURE%20MGL-PAX:SECTION" title="Structure">&#8594;</a> <a href="#AOC:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/main.lisp#L19">&#955;</a></span></span></p>

<h2><a href="#AOC:@BACKGROUND%20MGL-PAX:SECTION">2 Background</a></h2>

<pre><code>I have always aspired to a more spacious form
that would be free from the claims of poetry or prose
and would let us understand each other without exposing
the author or reader to sublime agonies.
</code></pre>

<ul>
<li>Czeslaw Milosz, <em>Ars Poetica</em></li>
</ul>

<p>What do we want from a program? For a long time, I have
wondered what it would mean to have truly <a href="https://lukego.github.io/blog/2012/10/24/readable-programs/" >readable programs</a>.
I agree with Peter Seibel that <a href="https://gigamonkeys.com/code-reading/" >code is not literature</a> and yet,
I <a href="https://blog.kingcons.io/posts/Research-Goals.html" >cannot help but imagine</a> a world where software supports our understanding.</p>

<p>Source code, <a href="https://blog.kingcons.io/posts/For-Posterity.html" >like language</a>, is a weak medium for humans. Many of the things we care
about cannot be captured in source code:</p>

<ul>
<li><p>the shape and volume of runtime data as well as the course it takes through the program</p></li>
<li><p>the performance characteristics of the application as it executes on physical hardware</p></li>
<li><p>the domain knowledge and engineering constraints that influenced design decisions</p></li>
</ul>

<p>Automated testing can capture some small fragments of these details but too much is left
to us to reconstruct using our imagination and experience. This is a large part of why
gaining comfort with a new codebase doesn't come from passive reading but active rewriting.</p>

<p>I continue to believe that the best way to combat these limitations comes from live environments
that allow runtime inspection of in-memory structures and support for inspecting, redefining,
and migrating both code and data in a live environment. I also recognize that, unlike the
fantasies of my youth, most people have no interest in looking under the hood at how a program
functions or how the machine carries out its tasks. And industry will continue moving away from
<a href="https://www.cs.virginia.edu/~evans/cs655/readings/smalltalk.html" >systems that are entirely comprehensible</a> by a single individual.</p>

<p>This program won't overcome these limitations in understanding. It will not reveal all its
contextual mysteries and the baggage of its creation to those who read it or run it. But I
enjoy programming most when it is a creative writing exercise. So I will try to make this
program open to exploration, document a little of what I understand, and show some
compassion for myself and you, dear reader.</p>

<p><a id="x-28AOC-3A-40STRUCTURE-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC:@STRUCTURE%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8592;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8593;</a> <a href="#AOC.UTIL:@AOC.UTIL%20MGL-PAX:SECTION" title="Utilities">&#8594;</a> <a href="#AOC:@STRUCTURE%20MGL-PAX:SECTION" title="Structure">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/main.lisp#L62">&#955;</a></span></span></p>

<h2><a href="#AOC:@STRUCTURE%20MGL-PAX:SECTION">3 Structure</a></h2>

<p>Readers will note that each day has some common themes:</p>

<ul>
<li><p>A package (or namespace) is defined for each problem.</p></li>
<li><p>Immediately after the package is a <a href="#AOC.UTIL:DEFSUMMARY%20MGL-PAX:MACRO" title="AOC.UTIL:DEFSUMMARY MGL-PAX:MACRO"><code>DEFSUMMARY</code></a> block
 to generate the day's entry on this site.</p></li>
<li><p>Three functions will always be present: <code>BUILD-DATA</code>, <code>PART-1</code>, and <code>PART-2</code>.</p></li>
<li><p><code>BUILD-DATA</code> will always rely on <a href="#AOC.UTIL:READ-DAY-INPUT%20MGL-PAX:MACRO" title="AOC.UTIL:READ-DAY-INPUT MGL-PAX:MACRO"><code>READ-DAY-INPUT</code></a> and some custom logic.</p></li>
</ul>

<p>Each function has a distinct role:</p>

<ol>
<li><p><code>BUILD-DATA</code>, responsible for parsing the input into a usable representation</p></li>
<li><p><code>PART-1</code>, responsible for solving the first part using parsed input</p></li>
<li><p><code>PART-2</code>, responsible for solving the second part using parsed input</p></li>
</ol>

<p>These three functions have optional inputs which default to the data file from AOC.
They are optional to allow mocking in tests. Tests are in a separate ASDF system
and rely only on these three functions.</p>

<p><a id="x-28AOC-2EUTIL-3A-40AOC-2EUTIL-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.UTIL:@AOC.UTIL%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@STRUCTURE%20MGL-PAX:SECTION" title="Structure">&#8592;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8593;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8594;</a> <a href="#AOC.UTIL:@AOC.UTIL%20MGL-PAX:SECTION" title="Utilities">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/util.lisp#L19">&#955;</a></span></span></p>

<h2><a href="#AOC.UTIL:@AOC.UTIL%20MGL-PAX:SECTION">4 Utilities</a></h2>

<h6>[in package AOC.UTIL]</h6>

<p>A collection of helpful utilities for working on Advent of Code problems.
There are 3 utilities of primary interest:</p>

<ol>
<li><p><a href="#AOC.UTIL:DEFSUMMARY%20MGL-PAX:MACRO" title="AOC.UTIL:DEFSUMMARY MGL-PAX:MACRO"><code>DEFSUMMARY</code></a>, which is responsible for generating the summary of a day</p></li>
<li><p><a href="#AOC.UTIL:READ-DAY-INPUT%20MGL-PAX:MACRO" title="AOC.UTIL:READ-DAY-INPUT MGL-PAX:MACRO"><code>READ-DAY-INPUT</code></a>, which is responsible for reading the input file for the day</p></li>
<li><p><a href="#AOC.UTIL:SCAFFOLD%20FUNCTION" title="AOC.UTIL:SCAFFOLD FUNCTION"><code>SCAFFOLD</code></a>, which fetches the input file and prepares the code file based on a template</p></li>
</ol>

<p><code>SCAFFOLD</code> is really only of interest at the REPL.</p>

<p><a id="x-28AOC-2EUTIL-3A-2AAOC-SESSION-2A-20VARIABLE-29"></a>
<a id="AOC.UTIL:*AOC-SESSION*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/util.lisp#L35">[variable]</a></span> <span class="reference-object"><a href="#AOC.UTIL:*AOC-SESSION*%20VARIABLE" >*AOC-SESSION*</a></span></span> <span class="locative-args">NIL</span></span></p>

<p>A token for the user's Advent of Code session. This must be supplied
for <a href="#AOC.UTIL:SCAFFOLD%20FUNCTION" title="AOC.UTIL:SCAFFOLD FUNCTION"><code>SCAFFOLD</code></a> to automatically fetch puzzle input for a given day.</p></li>
</ul>

<p><a id="x-28AOC-2EUTIL-3ADEFSUMMARY-20MGL-PAX-3AMACRO-29"></a>
<a id="AOC.UTIL:DEFSUMMARY%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/util.lisp#L139">[macro]</a></span> <span class="reference-object"><a href="#AOC.UTIL:DEFSUMMARY%20MGL-PAX:MACRO" >DEFSUMMARY</a></span></span> <span class="locative-args">(&amp;KEY TITLE (SHOW-ANSWER <code>T</code>)) &amp;BODY BODY</span></span></p>

<p>Create a <code>DEFSECTION</code> for an Advent of Code puzzle that automatically includes a link to the
requirements for the day as well as performance measurements of the <code>BUILD-DATA</code>, <code>PART-1</code>, and
<code>PART-2</code> functions. All content within <code>BODY</code> is spliced directly into the body of the <code>DEFSECTION</code>
after the requirements and results are displayed.</p>

<p><code>TITLE</code> should be the title of the day's problem. <code>SHOW-ANSWER</code> defaults to <code>T</code> as most problems
have simple and concise numeric or string answers. For more complicated problems whose output
might overflow a quote block, feel free to pass <code>NIL</code> instead.</p></li>
</ul>

<p><a id="x-28AOC-2EUTIL-3AFIND-SECTION-20FUNCTION-29"></a>
<a id="AOC.UTIL:FIND-SECTION%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/util.lisp#L84">[function]</a></span> <span class="reference-object"><a href="#AOC.UTIL:FIND-SECTION%20FUNCTION" >FIND-SECTION</a></span></span> <span class="locative-args">FILENAME</span></span></p>

<p>Find the section object corresponding with the supplied <code>FILENAME</code>.
Year and day for the file will be determined with a regex of the form:
<code>(\d{4}).*(\d{2})</code>. A filename not matching this pattern will error.</p></li>
</ul>

<p><a id="x-28AOC-2EUTIL-3APARENT-DIR-20FUNCTION-29"></a>
<a id="AOC.UTIL:PARENT-DIR%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/util.lisp#L92">[function]</a></span> <span class="reference-object"><a href="#AOC.UTIL:PARENT-DIR%20FUNCTION" >PARENT-DIR</a></span></span> <span class="locative-args">PATHNAME</span></span></p>

<p>Return the string naming the parent directory of <code>PATHNAME</code>.</p></li>
</ul>

<p><a id="x-28AOC-2EUTIL-3AREAD-DAY-INPUT-20MGL-PAX-3AMACRO-29"></a>
<a id="AOC.UTIL:READ-DAY-INPUT%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/util.lisp#L100">[macro]</a></span> <span class="reference-object"><a href="#AOC.UTIL:READ-DAY-INPUT%20MGL-PAX:MACRO" >READ-DAY-INPUT</a></span></span> <span class="locative-args">ITEM-PARSER &amp;KEY (SEPARATOR &quot;\n&quot;) (COMPACT <code>NIL</code>) (WHOLE <code>NIL</code>) (INPUT <code>NIL</code>)</span></span></p>

<p>Load the input data for the current day based on the name of <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* VARIABLE"><code>*PACKAGE*</code></a>, splitting
the file based on the value of <code>SEPARATOR</code> and processing each string with <code>ITEM-PARSER</code>.</p>

<p>If <code>WHOLE</code> is non-nil, skip splitting and pass to <code>ITEM-PARSER</code> directly instead of mapping.
If <code>INPUT</code> is supplied, use that instead of loading the DAT file matching the <code>*PACKAGE*</code>.
If <code>COMPACT</code> is non-nil, remove any <code>NIL</code> values after mapping over the data.</p></li>
</ul>

<p><a id="x-28AOC-2EUTIL-3ASCAFFOLD-20FUNCTION-29"></a>
<a id="AOC.UTIL:SCAFFOLD%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/util.lisp#L68">[function]</a></span> <span class="reference-object"><a href="#AOC.UTIL:SCAFFOLD%20FUNCTION" >SCAFFOLD</a></span></span> <span class="locative-args">YEAR DAY</span></span></p>

<p>Create a new lisp file for <code>YEAR</code> and <code>DAY</code> based on the <code>day.tmpl</code> template.
When <a href="#AOC.UTIL:*AOC-SESSION*%20VARIABLE" title="AOC.UTIL:*AOC-SESSION* VARIABLE"><code>*AOC-SESSION*</code></a> is non-nil, download the input file
for the day to <code>dayNN.dat</code> in the directory for the appropriate year. An error will
be thrown if a directory matching <code>YEAR</code> does not exist.</p></li>
</ul>

<p><a id="x-28AOC-3A-40AOC-2E2022-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC:@AOC.2022%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.UTIL:@AOC.UTIL%20MGL-PAX:SECTION" title="Utilities">&#8592;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8593;</a> <a href="#AOC.2022.01:@2022.01%20MGL-PAX:SECTION" title="Calorie Counting">&#8594;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/main.lisp#L110">&#955;</a></span></span></p>

<h2><a href="#AOC:@AOC.2022%20MGL-PAX:SECTION">5 Advent 2022</a></h2>

<p><a id="x-28AOC-2E2022-2E01-3A-402022-2E01-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.01:@2022.01%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.02:@2022.02%20MGL-PAX:SECTION" title="Rock Paper Scissors">&#8594;</a> <a href="#AOC.2022.01:@2022.01%20MGL-PAX:SECTION" title="Calorie Counting">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day01.lisp#L9">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.01:@2022.01%20MGL-PAX:SECTION">5.1 Calorie Counting</a></h3>

<h6>[in package AOC.2022.01 with nicknames 2022.01]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/1" >Day 01</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day01.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     373kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  70374
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  204610
</code></pre>

<h5><em>Reflections</em></h5>

<p>As usual, the first day is a straightforward warmup problem.
We are given a list of lists of integers and asked to find the
sublist that has the largest sum. Each integer is on a separate
line and the sublists are separated by a blank line.</p>

<p><strong>Parsing</strong></p>

<p>Parsing is made much easier thanks to my <a href="#AOC.UTIL:READ-DAY-INPUT%20MGL-PAX:MACRO" title="AOC.UTIL:READ-DAY-INPUT MGL-PAX:MACRO"><code>READ-DAY-INPUT</code></a> macro.
I can use its <code>:separator</code> option to group the input into sublists
and then map over the sublists with <code>PARSE-INVENTORY</code>.</p>

<p>Inside <code>PARSE-INVENTORY</code> I make use of Serapeum's handy threading macro
<a href="https://github.com/ruricolist/serapeum/blob/master/REFERENCE.md#-needle-rest-holes" >~&gt;&gt;</a>
to construct a pipeline for parsing and summing the elements in the sublist.</p>

<p><a id="x-28AOC-2E2022-2E01-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E01-3A-3APARSE-INVENTORY-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E01-3A-3APART-1-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.01:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.01::PARSE-INVENTORY%20FUNCTION%29%20:END%20%28AOC.2022.01::PART-1%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> parse-inventory <span class="paren2">(<span class="code">inventory</span>)</span>
  <span class="paren2">(<span class="code">~&gt;&gt; <span class="paren3">(<span class="code">split <span class="string">"</span><span class="string">\\</span><span class="string">n"</span> inventory</span>)</span>
       <span class="paren3">(<span class="code">mapcar #'parse-integer</span>)</span>
       <span class="paren3">(<span class="code">reduce #'+</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input #'parse-inventory <span class="keyword">:separator</span> <span class="string">"</span><span class="string">\\</span><span class="string">n</span><span class="string">\\</span><span class="string">n"</span> <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p>With so much work handled in the parsing step, we can simply use
Lisp's <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_max_m.htm" title="MAX FUNCTION"><code>MAX</code></a> on the parsed input to arrive at the answer for part 1.</p>

<p><a id="x-28AOC-2E2022-2E01-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E01-3A-3APART-1-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E01-3A-3ATOTAL-SNACKS-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.01:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.01::PART-1%20FUNCTION%29%20:END%20%28AOC.2022.01::TOTAL-SNACKS%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">apply 'max data</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p>Part 2 asks us to figure out the total of the 3 largest sublists.
Easy enough. We'll lean on the <code>~&gt;&gt;</code> macro again and simply sort
the parsed input, then sum the first 3 items.</p>

<p><a id="x-28AOC-2E2022-2E01-3APART-2-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E01-3A-3ATOTAL-SNACKS-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E01-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.01:PART-2-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.01::TOTAL-SNACKS%20FUNCTION%29%20:END%20%28AOC.2022.01::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> total-snacks <span class="paren2">(<span class="code">snacks</span>)</span>
  <span class="paren2">(<span class="code">~&gt;&gt; <span class="paren3">(<span class="code">sort snacks #'&gt;</span>)</span>
       <span class="paren3">(<span class="code">subseq _ 0 3</span>)</span>
       <span class="paren3">(<span class="code">reduce #'+</span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28AOC-2E2022-2E02-3A-402022-2E02-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.02:@2022.02%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.01:@2022.01%20MGL-PAX:SECTION" title="Calorie Counting">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.03:@2022.03%20MGL-PAX:SECTION" title="Rucksack Reorganization">&#8594;</a> <a href="#AOC.2022.02:@2022.02%20MGL-PAX:SECTION" title="Rock Paper Scissors">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day02.lisp#L14">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.02:@2022.02%20MGL-PAX:SECTION">5.2 Rock Paper Scissors</a></h3>

<h6>[in package AOC.2022.02 with nicknames 2022.02]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/2" >Day 02</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day02.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   4.001ms  Memory:     589kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  12156
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  10835
</code></pre>

<h5><em>Reflections</em></h5>

<p>The second day was actually pretty interesting this year. It asks us to
interpret a series of single-round rock paper scissors games. Each line in the
input consists of two moves, one for the opponent and the player. There's a
heuristic for scoring the games and we are asked to find the total score for the
games played. Even though the ask is simple and I found an brute force solution
quickly, I went through three iterations before arriving at something I really
liked. The insight that satisfied me was that there are only 9 possible games of
single-round RPS, so we can model the scoring as a search problem.</p>

<p><strong>Parsing</strong></p>

<p>Parsing is simple, I just convert the characters in each line
to symbols. This simplifies equality testing as Common Lisp uses
different predicates for symbols and strings. (<code>EQL</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_eql.htm" title="EQL FUNCTION"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_eql.htm" title="EQL TYPE"><code>1</code></a>) vs <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_equal.htm" title="EQUAL FUNCTION"><code>EQUAL</code></a>)</p>

<p><a id="x-28AOC-2E2022-2E02-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E02-3A-3APARSE-MOVE-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E02-3A-3A-2AGAMES-2A-20VARIABLE-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.02:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.02::PARSE-MOVE%20FUNCTION%29%20:END%20%28AOC.2022.02::*GAMES*%20VARIABLE%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> parse-move <span class="paren2">(<span class="code">input</span>)</span>
  <span class="paren2">(<span class="code">list <span class="paren3">(<span class="code">make-keyword <span class="paren4">(<span class="code">char input 0</span>)</span></span>)</span>
        <span class="paren3">(<span class="code">make-keyword <span class="paren4">(<span class="code">char input 2</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input #'parse-move <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p>First we model the possible <code>*GAMES*</code> and their scores based on the
puzzle requirements. The <code>PLAY</code> function will take a list of attributes
from a game and find the unique matching game, returning its score.
With that in place, <code>TOTAL-SCORE</code> can be a simple reducer over the games.</p>

<p><a id="x-28AOC-2E2022-2E02-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E02-3A-3A-2AGAMES-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E02-3A-3ACHOOSE-OUTCOME-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.02:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.02::*GAMES*%20VARIABLE%29%20:END%20%28AOC.2022.02::CHOOSE-OUTCOME%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*games*</span>
  '<span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="keyword">:a</span> <span class="keyword">:x</span> <span class="keyword">:draw</span> 4</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:a</span> <span class="keyword">:y</span> <span class="keyword">:win</span>  8</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:a</span> <span class="keyword">:z</span> <span class="keyword">:lose</span> 3</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:b</span> <span class="keyword">:x</span> <span class="keyword">:lose</span> 1</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:b</span> <span class="keyword">:y</span> <span class="keyword">:draw</span> 5</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:b</span> <span class="keyword">:z</span> <span class="keyword">:win</span>  9</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:c</span> <span class="keyword">:x</span> <span class="keyword">:win</span>  7</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:c</span> <span class="keyword">:y</span> <span class="keyword">:lose</span> 2</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:c</span> <span class="keyword">:z</span> <span class="keyword">:draw</span> 6</span>)</span></span>)</span>
  <span class="string">"A list of all possible 1-round games of Rock, Paper, Scissors.
In the format: (opponent-move player-move result score)"</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> play <span class="paren2">(<span class="code">input</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">flet</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">match? <span class="paren5">(<span class="code">game</span>)</span>
           <span class="paren5">(<span class="code">every <span class="paren6">(<span class="code">op <span class="paren1">(<span class="code">member _ game</span>)</span></span>)</span> input</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">declare <span class="paren4">(<span class="code">dynamic-extent #'match?</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">lastcar <span class="paren4">(<span class="code">find-if #'match? <span class="special">*games*</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> total-score <span class="paren2">(<span class="code">games key-fn</span>)</span>
  <span class="paren2">(<span class="code">reduce #'+ games <span class="keyword">:key</span> key-fn</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">total-score data #'play</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p>The curveball in Part 2 is that we should treat the player choice not as the move
to throw, but the outcome to achieve. Since we know the opponent's move in advance,
we can just map the second input to an outcome and reuse <code>PLAY</code>'s matching behavior.</p>

<p><a id="x-28AOC-2E2022-2E02-3APART-2-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E02-3A-3ACHOOSE-OUTCOME-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E02-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.02:PART-2-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.02::CHOOSE-OUTCOME%20FUNCTION%29%20:END%20%28AOC.2022.02::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> choose-outcome <span class="paren2">(<span class="code">game</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">outcome-map '<span class="paren5">(<span class="code"><span class="keyword">:x</span> <span class="keyword">:lose</span> <span class="keyword">:y</span> <span class="keyword">:draw</span> <span class="keyword">:z</span> <span class="keyword">:win</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">setf <span class="paren4">(<span class="code">second game</span>)</span> <span class="paren4">(<span class="code">getf outcome-map <span class="paren5">(<span class="code">second game</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">play game</span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28AOC-2E2022-2E03-3A-402022-2E03-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.03:@2022.03%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.02:@2022.02%20MGL-PAX:SECTION" title="Rock Paper Scissors">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.04:@2022.04%20MGL-PAX:SECTION" title="Camp Cleanup">&#8594;</a> <a href="#AOC.2022.03:@2022.03%20MGL-PAX:SECTION" title="Rucksack Reorganization">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day03.lisp#L12">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.03:@2022.03%20MGL-PAX:SECTION">5.3 Rucksack Reorganization</a></h3>

<h6>[in package AOC.2022.03 with nicknames 2022.03]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/3" >Day 03</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day03.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     196kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:     223kb  Answer:  7980
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:     176kb  Answer:  2881
</code></pre>

<h5><em>Reflections</em></h5>

<p>Day 3 supplies us with random-seeming alphabetic strings and asks us to find
the duplicated character in the first and second half of the string. Then we
should score and sum those characters. This is easy when modeled as a set
intersection of two lists of characters.</p>

<p><strong>Parsing</strong></p>

<p>Parsing is trivial. Just split the input by newlines. This is the default
behavior of <a href="#AOC.UTIL:READ-DAY-INPUT%20MGL-PAX:MACRO" title="AOC.UTIL:READ-DAY-INPUT MGL-PAX:MACRO"><code>READ-DAY-INPUT</code></a> so we pass <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_identi.htm" title="IDENTITY FUNCTION"><code>IDENTITY</code></a> as the callback.</p>

<p><a id="x-28AOC-2E2022-2E03-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E03-3A-3ABUILD-DATA-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E03-3A-3A-2APRIORITIES-2A-20VARIABLE-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.03:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.03::BUILD-DATA%20FUNCTION%29%20:END%20%28AOC.2022.03::*PRIORITIES*%20VARIABLE%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input #'identity <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p>The most annoying aspect of part 1 was the arbitrary scoring they
came up with that was related to but did not quite match ASCII values.
The <code>*PRIORITIES*</code> table deals with this and makes score lookup easy.</p>

<p>The <code>SOLVE</code> function handles the rest of the problem. It runs a preprocess-fn on
the parsed input, then maps over it with <code>SEARCH-RUCKSACK</code> to find the duplicated
character. Finally, we run the characters through <code>TOTAL-PRIORITY</code> for scoring.
In part 1, our preprocess-fn simply splits the input lines into two halves.</p>

<p><a id="x-28AOC-2E2022-2E03-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E03-3A-3A-2APRIORITIES-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E03-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.03:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.03::*PRIORITIES*%20VARIABLE%29%20:END%20%28AOC.2022.03::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*priorities*</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">table <span class="paren5">(<span class="code">make-hash-table <span class="keyword">:test</span> #'eq</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for code from 65 upto 90
          do <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">gethash <span class="paren6">(<span class="code">code-char code</span>)</span> table</span>)</span> <span class="paren5">(<span class="code">- code 38</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for code from 97 upto 122
          do <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">gethash <span class="paren6">(<span class="code">code-char code</span>)</span> table</span>)</span> <span class="paren5">(<span class="code">- code 96</span>)</span></span>)</span></span>)</span>
    table</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> search-rucksack <span class="paren2">(<span class="code">group</span>)</span>
  <span class="paren2">(<span class="code">first <span class="paren3">(<span class="code">reduce #'intersection group <span class="keyword">:key</span> <span class="paren4">(<span class="code">op <span class="paren5">(<span class="code">coerce _ 'list</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> total-priority <span class="paren2">(<span class="code">items</span>)</span>
  <span class="paren2">(<span class="code">reduce #'+ items <span class="keyword">:key</span> <span class="paren3">(<span class="code">op <span class="paren4">(<span class="code">gethash _ <span class="special">*priorities*</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> solve <span class="paren2">(<span class="code">data preprocess-fn</span>)</span>
  <span class="paren2">(<span class="code">~&gt;&gt; <span class="paren3">(<span class="code">funcall preprocess-fn data</span>)</span>
       <span class="paren3">(<span class="code">mapcar #'search-rucksack</span>)</span>
       <span class="paren3">(<span class="code">total-priority</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">solve data <span class="paren3">(<span class="code">op <span class="paren4">(<span class="code">mapcar <span class="paren5">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="paren6">(<span class="code">x</span>)</span> <span class="paren6">(<span class="code">multiple-value-list <span class="paren1">(<span class="code">halves x</span>)</span></span>)</span></span>)</span> _</span>)</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p>Part 2 doesn't require any special handling at all.
We simply call solve as we did in part-1 but with a different <code>preprocess-fn</code>,
asking it to group things with <code>(op (serapeum:batches _ 3))</code>.</p>

<p><a id="x-28AOC-2E2022-2E04-3A-402022-2E04-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.04:@2022.04%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.03:@2022.03%20MGL-PAX:SECTION" title="Rucksack Reorganization">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.05:@2022.05%20MGL-PAX:SECTION" title="Supply Stacks">&#8594;</a> <a href="#AOC.2022.04:@2022.04%20MGL-PAX:SECTION" title="Camp Cleanup">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day04.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.04:@2022.04%20MGL-PAX:SECTION">5.4 Camp Cleanup</a></h3>

<h6>[in package AOC.2022.04 with nicknames 2022.04]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/4" >Day 04</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day04.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:   6,814kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:       0kb  Answer:  471
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  888
</code></pre>

<h5><em>Reflections</em></h5>

<p>Day 4 gives us a list of ranges of numbers, two to a line.
We are asked to count up the lines where one range is entirely
contained by another. We just need a way to determine if one range
is contained by, or a subset of, another range.</p>

<p><strong>Parsing</strong></p>

<p>Parsing is more involved today so we break out the
<a href="https://scymtym.github.io/esrap/" >esrap</a> library for PEG parsing tools.
We define a parser called <code>RANGES</code> reusing an integer rule from my <code>aoc.parsers</code>.</p>

<p><a id="x-28AOC-2E2022-2E04-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E04-3A-3A-2APARSER-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E04-3A-3ASUBSET-3F-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.04:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.04::*PARSER*%20VARIABLE%29%20:END%20%28AOC.2022.04::SUBSET%3F%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*parser*</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">defrule</span></i> ranges <span class="paren3">(<span class="code">and integer <span class="string">"-"</span> integer <span class="string">","</span> integer <span class="string">"-"</span> integer</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:lambda</span> <span class="paren4">(<span class="code">list</span>)</span> <span class="paren4">(<span class="code">remove-if-not #'integerp list</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input <span class="paren3">(<span class="code">partial #'parse <span class="special">*parser*</span></span>)</span> <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p>Common Lisp's <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_countc.htm" title="COUNT-IF FUNCTION"><code>COUNT-IF</code></a> function is ideal for this puzzle, accepting
a callback to run on each element in the given sequence. All we need
to do is write a <code>SUBSET?</code> check that can look at the start and end of
the two ranges and determine if one is entirely contained in the other.</p>

<p><a id="x-28AOC-2E2022-2E04-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E04-3A-3ASUBSET-3F-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E04-3A-3AOVERLAP-3F-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.04:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.04::SUBSET%3F%20FUNCTION%29%20:END%20%28AOC.2022.04::OVERLAP%3F%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> subset? <span class="paren2">(<span class="code">assignment</span>)</span>
  <span class="paren2">(<span class="code">destructuring-bind <span class="paren3">(<span class="code">a1 a2 b1 b2</span>)</span> assignment
    <span class="paren3">(<span class="code">or <span class="paren4">(<span class="code">&lt;= b1 a1 a2 b2</span>)</span>
        <span class="paren4">(<span class="code">&lt;= a1 b1 b2 a2</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">count-if #'subset? data</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p>Part 2 complicates things slightly by asking to detect overlapping
ranges rather than subsets, but this is still simple to test for.
The <code>OVERLAP?</code> function handles this and acts as our callback for part 2.</p>

<p><a id="x-28AOC-2E2022-2E04-3APART-2-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E04-3A-3AOVERLAP-3F-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E04-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.04:PART-2-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.04::OVERLAP%3F%20FUNCTION%29%20:END%20%28AOC.2022.04::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> overlap? <span class="paren2">(<span class="code">assignment</span>)</span>
  <span class="paren2">(<span class="code">destructuring-bind <span class="paren3">(<span class="code">a1 a2 b1 b2</span>)</span> assignment
    <span class="paren3">(<span class="code">or <span class="paren4">(<span class="code">&lt;= a1 b1 b2 a2</span>)</span>
        <span class="paren4">(<span class="code">&lt;= b1 a1 a2 b2</span>)</span>
        <span class="paren4">(<span class="code">&lt;= a1 b1 a2 b2</span>)</span>
        <span class="paren4">(<span class="code">&lt;= b1 a1 b2 a2</span>)</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28AOC-2E2022-2E05-3A-402022-2E05-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.05:@2022.05%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.04:@2022.04%20MGL-PAX:SECTION" title="Camp Cleanup">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.06:@2022.06%20MGL-PAX:SECTION" title="Tuning Trouble">&#8594;</a> <a href="#AOC.2022.05:@2022.05%20MGL-PAX:SECTION" title="Supply Stacks">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day05.lisp#L14">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.05:@2022.05%20MGL-PAX:SECTION">5.5 Supply Stacks</a></h3>

<h6>[in package AOC.2022.05 with nicknames 2022.05]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/5" >Day 05</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day05.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   4.000ms  Memory:   1,837kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:      48kb  Answer:  RTGWZTHLD
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:      64kb  Answer:  JCGQZRNHN
</code></pre>

<h5><em>Reflections</em></h5>

<p>Day 5 asks us what message is shown after performing a series of crane moves
on stacks of labeled shipping containers. This is pretty simple to model with
a map of integers to stacks or an array of stacks. Unfortunately, parsing the
representation for the day is not so simple.</p>

<p><strong>Parsing</strong></p>

<p>We break out <a href="https://scymtym.github.io/esrap/" >esrap</a> again to build a
robust parser for this format. We separate it into rules for the header
consisting of several rows of crates, the labels for those rows, and the
instructions for how to move the crane. <code>PARSE-STACKS</code> takes the extracted
values from esrap's parse step and constructs a hash table with stacks
matching the ASCII depiction in the header.</p>

<p><a id="x-28AOC-2E2022-2E05-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E05-3A-3A-2AFIRST-RULE-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E05-3A-3AMOVE-CRATES-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.05:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.05::*FIRST-RULE*%20VARIABLE%29%20:END%20%28AOC.2022.05::MOVE-CRATES%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*first-rule*</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">defrule</span></i> move <span class="paren3">(<span class="code">and <span class="string">"move "</span> integer <span class="string">" from "</span> integer <span class="string">" to "</span> integer <span class="paren4">(<span class="code">? <span class="character">#\Newline</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:lambda</span> <span class="paren4">(<span class="code">list</span>)</span>
      <span class="paren4">(<span class="code">remove-if-not #'integerp list</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> instructions <span class="paren2">(<span class="code">+ move</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> crate <span class="paren2">(<span class="code">and <span class="string">"["</span> letter <span class="string">"]"</span> whitespace</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> second</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> gap <span class="paren2">(<span class="code">and whitespace whitespace whitespace whitespace</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:constant</span> <span class="keyword">:gap</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> row <span class="paren2">(<span class="code">+ <span class="paren3">(<span class="code">or crate gap</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> <i><span class="symbol">labels</span></i> <span class="paren2">(<span class="code">+ <span class="paren3">(<span class="code">or whitespace integer <span class="character">#\Newline</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:lambda</span> <span class="paren3">(<span class="code">list</span>)</span>
    <span class="paren3">(<span class="code">remove-if-not #'integerp list</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> header <span class="paren2">(<span class="code">+ row</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> first</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> stacks <span class="paren2">(<span class="code">and header <i><span class="symbol">labels</span></i> instructions</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> add-row <span class="paren2">(<span class="code">row table</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> for i = 1 then <span class="paren3">(<span class="code">1+ i</span>)</span>
        for item in row
        when <span class="paren3">(<span class="code">characterp item</span>)</span>
          do <span class="paren3">(<span class="code">push item <span class="paren4">(<span class="code">gethash i table</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> parse-stacks <span class="paren2">(<span class="code">input</span>)</span>
  <span class="paren2">(<span class="code">destructuring-bind <span class="paren3">(<span class="code">headers <i><span class="symbol">labels</span></i> moves</span>)</span> <span class="paren3">(<span class="code">parse 'stacks input</span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">let*</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">stack-count <span class="paren6">(<span class="code">length <i><span class="symbol">labels</span></i></span>)</span></span>)</span>
           <span class="paren5">(<span class="code">stacks <span class="paren6">(<span class="code">make-hash-table</span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code"><i><span class="symbol">loop</span></i> for row in <span class="paren5">(<span class="code">reverse <span class="paren6">(<span class="code">batches headers stack-count</span>)</span></span>)</span>
            do <span class="paren5">(<span class="code">add-row row stacks</span>)</span></span>)</span>
      <span class="paren4">(<span class="code">list moves stacks</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input #'parse-stacks <span class="keyword">:whole</span> t <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p>The actual work of this problem is simple. We have a list of moves to perform.
We want to move a certain number of crates from stack A to stack B which is
handled by <code>MOVE-CRATES</code>. Running all the instructions and reading the labels
of the top crates on each stack is performed by <code>INTERPRET</code>.</p>

<p><a id="x-28AOC-2E2022-2E05-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E05-3A-3AMOVE-CRATES-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E05-3A-3AMOVE-CRATES-CONTIGUOUS-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.05:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.05::MOVE-CRATES%20FUNCTION%29%20:END%20%28AOC.2022.05::MOVE-CRATES-CONTIGUOUS%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> move-crates <span class="paren2">(<span class="code">count origin destination stacks</span>)</span>
  <span class="paren2">(<span class="code">dotimes <span class="paren3">(<span class="code">i count</span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">item <span class="paren6">(<span class="code">pop <span class="paren1">(<span class="code">gethash origin stacks</span>)</span></span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">push item <span class="paren5">(<span class="code">gethash destination stacks</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> interpret <span class="paren2">(<span class="code">data step-fn</span>)</span>
  <span class="paren2">(<span class="code">destructuring-bind <span class="paren3">(<span class="code">moves stacks</span>)</span> data
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for <span class="paren4">(<span class="code">count origin destination</span>)</span> in moves
          do <span class="paren4">(<span class="code">funcall step-fn count origin destination stacks</span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for i from 1 upto <span class="paren4">(<span class="code">hash-table-count stacks</span>)</span>
          collecting <span class="paren4">(<span class="code">first <span class="paren5">(<span class="code">gethash i stacks</span>)</span></span>)</span> into chars
          finally <span class="paren4">(<span class="code">return <span class="paren5">(<span class="code">coerce chars 'string</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">interpret data #'move-crates</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p>Part 2 complicates matters very slightly by asking that we move the crates all
at once rather than one at a time. This is handled by <code>MOVE-CRATES-CONTIGUOUS</code>.</p>

<p><a id="x-28AOC-2E2022-2E05-3APART-2-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E05-3A-3AMOVE-CRATES-CONTIGUOUS-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E05-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.05:PART-2-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.05::MOVE-CRATES-CONTIGUOUS%20FUNCTION%29%20:END%20%28AOC.2022.05::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> move-crates-contiguous <span class="paren2">(<span class="code">count origin destination stacks</span>)</span>
  <span class="paren2">(<span class="code">multiple-value-bind <span class="paren3">(<span class="code">to-move new-origin</span>)</span> <span class="paren3">(<span class="code">halves <span class="paren4">(<span class="code">gethash origin stacks</span>)</span> count</span>)</span>
    <span class="paren3">(<span class="code">setf <span class="paren4">(<span class="code">gethash origin stacks</span>)</span> new-origin
          <span class="paren4">(<span class="code">gethash destination stacks</span>)</span> <span class="paren4">(<span class="code">append to-move <span class="paren5">(<span class="code">gethash destination stacks</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28AOC-2E2022-2E06-3A-402022-2E06-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.06:@2022.06%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.05:@2022.05%20MGL-PAX:SECTION" title="Supply Stacks">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.07:@2022.07%20MGL-PAX:SECTION" title="No Space Left on Device">&#8594;</a> <a href="#AOC.2022.06:@2022.06%20MGL-PAX:SECTION" title="Tuning Trouble">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day06.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.06:@2022.06%20MGL-PAX:SECTION">5.6 Tuning Trouble</a></h3>

<h6>[in package AOC.2022.06 with nicknames 2022.06]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/6" >Day 06</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day06.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:      58kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:     239kb  Answer:  1802
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:   1,247kb  Answer:  3551
</code></pre>

<h5><em>Reflections</em></h5>

<p>Day 6 is straightforward both in terms of parsing and logic.
The input data is a single long string and we are asked to find a run
of distinct characters of a certain size.</p>

<p><strong>Parsing</strong></p>

<p>We lean on the default <a href="#AOC.UTIL:READ-DAY-INPUT%20MGL-PAX:MACRO" title="AOC.UTIL:READ-DAY-INPUT MGL-PAX:MACRO"><code>READ-DAY-INPUT</code></a> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_identi.htm" title="IDENTITY FUNCTION"><code>IDENTITY</code></a> behavior again.</p>

<p><strong>Part 1</strong></p>

<p>Part 1 is pretty straightforward thanks to the combination of <code>SETP</code> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_loop.htm" title="LOOP MGL-PAX:MACRO"><code>LOOP</code></a>.
We loop until we find a distinct run of characters, checked for by
<code>PACKET-MARKER?</code>, always looking back to avoid running off the end of the input.</p>

<p><a id="x-28AOC-2E2022-2E06-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E06-3A-3APACKET-MARKER-3F-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E06-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.06:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.06::PACKET-MARKER%3F%20FUNCTION%29%20:END%20%28AOC.2022.06::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> packet-marker? <span class="paren2">(<span class="code">input end width</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">buffer <span class="paren5">(<span class="code">coerce <span class="paren6">(<span class="code">subseq input <span class="paren1">(<span class="code">- end width</span>)</span> end</span>)</span> 'list</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">setp buffer</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> find-signal-marker <span class="paren2">(<span class="code">input width</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> for end = width then <span class="paren3">(<span class="code">1+ end</span>)</span>
        until <span class="paren3">(<span class="code">packet-marker? input end width</span>)</span>
        finally <span class="paren3">(<span class="code">return end</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">find-signal-marker data 4</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p>Part 2 only asks for a different marker width which was easy to parameterize
out of the original code. Pass 14 instead of 4 and we're all done.</p>

<p><a id="x-28AOC-2E2022-2E07-3A-402022-2E07-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.07:@2022.07%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.06:@2022.06%20MGL-PAX:SECTION" title="Tuning Trouble">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.08:@2022.08%20MGL-PAX:SECTION" title="Treetop Tree House">&#8594;</a> <a href="#AOC.2022.07:@2022.07%20MGL-PAX:SECTION" title="No Space Left on Device">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day07.lisp#L18">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.07:@2022.07%20MGL-PAX:SECTION">5.7 No Space Left on Device</a></h3>

<h6>[in package AOC.2022.07 with nicknames 2022.07]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/7" >Day 07</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day07.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   4.000ms  Memory:   5,123kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.001ms  Memory:   1,193kb  Answer:  1077191
</code></pre>

<p>Part 2:</p>

<pre><code>Time:  52.001ms  Memory:   8,507kb  Answer:  5649896
</code></pre>

<h5><em>Reflections</em></h5>

<p>Day 7 is a particularly fun problem. We're asked to read an input
file with a terminal session of directory listings and determine the
total space usage of directories matching some criteria. The directory
names are sometimes reused at different points in the tree, so we can't
cheat and just have a map from directory names to sizes, we need to model
the full path and add the size of each new file to the parent dirs all the
way up the tree.</p>

<p><strong>Parsing</strong></p>

<p>Parsing isn't too hard thanks to esrap. A few simple rules about files
and distinguishing commands from output and we're ready to go.</p>

<p><a id="x-28AOC-2E2022-2E07-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E07-3A-3A-2AFIRST-RULE-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E07-3A-3ACHANGE-DIRECTORY-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.07:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.07::*FIRST-RULE*%20VARIABLE%29%20:END%20%28AOC.2022.07::CHANGE-DIRECTORY%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*first-rule*</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">defrule</span></i> filename <span class="paren3">(<span class="code">+ <span class="paren4">(<span class="code">or letter <span class="character">#\.</span> <span class="character">#\/</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:text</span> t</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> filespec <span class="paren2">(<span class="code">and integer <span class="string">" "</span> filename</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> first</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> dir-entry <span class="paren2">(<span class="code">and <span class="string">"dir "</span> filename</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:constant</span> nil</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> command <span class="paren2">(<span class="code">and <span class="string">"$ "</span> <span class="paren3">(<span class="code">or <span class="string">"ls"</span> <span class="string">"cd"</span></span>)</span> <span class="paren3">(<span class="code">? <span class="paren4">(<span class="code">and <span class="string">" "</span> filename</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> third</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> lastcar</span>)</span></span>)</span> <span class="comment">;; Ignore anything but filename
</span>
<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> entry <span class="paren2">(<span class="code">or command filespec dir-entry</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input <span class="paren3">(<span class="code">partial #'parse 'entry</span>)</span> <span class="keyword">:compact</span> t <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p>There's a bit of a kludge here in that I use a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/d_specia.htm" title="SPECIAL DECLARATION"><code>SPECIAL</code></a> variable to represent
the current directory being traversed rather than passing it around all over
the place. I'd like to refactor it but it works well for this use case.</p>

<p><a id="x-28AOC-2E2022-2E07-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E07-3A-3ACHANGE-DIRECTORY-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E07-3A-3ASMALLEST-MATCHING-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.07:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.07::CHANGE-DIRECTORY%20FUNCTION%29%20:END%20%28AOC.2022.07::SMALLEST-MATCHING%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> change-directory <span class="paren2">(<span class="code">entry</span>)</span>
  <span class="paren2">(<span class="code">declare <span class="paren3">(<span class="code">special <span class="special">*current-directory*</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">if</span></i> <span class="paren3">(<span class="code">string= <span class="string">".."</span> entry</span>)</span>
      <span class="paren3">(<span class="code">pop <span class="special">*current-directory*</span></span>)</span>
      <span class="paren3">(<span class="code">push entry <span class="special">*current-directory*</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> count-file <span class="paren2">(<span class="code">entry table</span>)</span>
  <span class="paren2">(<span class="code">declare <span class="paren3">(<span class="code">special <span class="special">*current-directory*</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> with directory = <span class="paren3">(<span class="code">copy-list <span class="special">*current-directory*</span></span>)</span>
        until <span class="paren3">(<span class="code">emptyp directory</span>)</span>
        do <span class="paren3">(<span class="code">incf <span class="paren4">(<span class="code">gethash directory table 0</span>)</span> entry</span>)</span>
           <span class="paren3">(<span class="code">pop directory</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> record-entry <span class="paren2">(<span class="code">entry table</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">if</span></i> <span class="paren3">(<span class="code">stringp entry</span>)</span>
      <span class="paren3">(<span class="code">change-directory entry</span>)</span>
      <span class="paren3">(<span class="code">count-file entry table</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> compute-directory-sizes <span class="paren2">(<span class="code">data</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">table <span class="paren5">(<span class="code">make-hash-table <span class="keyword">:test</span> #'equal</span>)</span></span>)</span>
        <span class="paren4">(<span class="code"><span class="special">*current-directory*</span> nil</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">declare <span class="paren4">(<span class="code">special <span class="special">*current-directory*</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">dolist <span class="paren4">(<span class="code">entry data</span>)</span>
      <span class="paren4">(<span class="code">record-entry entry table</span>)</span></span>)</span>
    table</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> total-size-matching <span class="paren2">(<span class="code">match-fn data</span>)</span>
  <span class="paren2">(<span class="code">~&gt;&gt; <span class="paren3">(<span class="code">compute-directory-sizes data</span>)</span>
       <span class="paren3">(<span class="code">hash-table-values</span>)</span>
       <span class="paren3">(<span class="code">remove-if-not match-fn</span>)</span>
       <span class="paren3">(<span class="code">reduce #'+</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">total-size-matching <span class="paren3">(<span class="code">op <span class="paren4">(<span class="code">&lt; _ 100000</span>)</span></span>)</span> data</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p>Part 2 asks us to find the smallest directory that will free up enough space
for a firmware update. </p>

<p>There's another kludge here in that to get a clean pipeline, I recompute the
directory sizes to determine how much space needs to be freed up. Ouch!</p>

<p><a id="x-28AOC-2E2022-2E07-3APART-2-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E07-3A-3ASMALLEST-MATCHING-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E07-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.07:PART-2-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.07::SMALLEST-MATCHING%20FUNCTION%29%20:END%20%28AOC.2022.07::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> smallest-matching <span class="paren2">(<span class="code">match-fn data</span>)</span>
  <span class="paren2">(<span class="code">~&gt;&gt; <span class="paren3">(<span class="code">compute-directory-sizes data</span>)</span>
       <span class="paren3">(<span class="code">hash-table-values</span>)</span>
       <span class="paren3">(<span class="code">remove-if-not match-fn</span>)</span>
       <span class="paren3">(<span class="code">apply 'min</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> needed-space <span class="paren2">(<span class="code">data</span>)</span>
  <span class="paren2">(<span class="code">~&gt;&gt; <span class="paren3">(<span class="code">compute-directory-sizes data</span>)</span>
       <span class="paren3">(<span class="code">gethash '<span class="paren4">(<span class="code"><span class="string">"/"</span></span>)</span></span>)</span>
       <span class="paren3">(<span class="code">- 70000000</span>)</span>
       <span class="paren3">(<span class="code">- 30000000</span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28AOC-2E2022-2E08-3A-402022-2E08-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.08:@2022.08%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.07:@2022.07%20MGL-PAX:SECTION" title="No Space Left on Device">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.09:@2022.09%20MGL-PAX:SECTION" title="Rope Bridge">&#8594;</a> <a href="#AOC.2022.08:@2022.08%20MGL-PAX:SECTION" title="Treetop Tree House">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day08.lisp#L9">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.08:@2022.08%20MGL-PAX:SECTION">5.8 Treetop Tree House</a></h3>

<h6>[in package AOC.2022.08 with nicknames 2022.08]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/8" >Day 08</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day08.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:   1,184kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:  24.000ms  Memory:  39,433kb  Answer:  1849
</code></pre>

<p>Part 2:</p>

<pre><code>Time:  24.001ms  Memory:  46,863kb  Answer:  201600
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Parsing</strong></p>

<p><a id="x-28AOC-2E2022-2E08-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E08-3A-3APARSE-ROW-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E08-3A-3AMAKE-CARDINAL-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.08:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.08::PARSE-ROW%20FUNCTION%29%20:END%20%28AOC.2022.08::MAKE-CARDINAL%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> parse-row <span class="paren2">(<span class="code">row</span>)</span>
  <span class="paren2">(<span class="code">mapcar #'parse-integer <span class="paren3">(<span class="code">split <span class="string">""</span> row</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">data <span class="paren5">(<span class="code">read-day-input #'parse-row <span class="keyword">:input</span> input</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">make-array <span class="paren4">(<span class="code">list <span class="paren5">(<span class="code">length data</span>)</span> <span class="paren5">(<span class="code">length data</span>)</span></span>)</span> <span class="keyword">:initial-contents</span> data</span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p><a id="x-28AOC-2E2022-2E08-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E08-3A-3AMAKE-CARDINAL-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E08-3A-3ASCENIC-SCORE-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.08:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.08::MAKE-CARDINAL%20FUNCTION%29%20:END%20%28AOC.2022.08::SCENIC-SCORE%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> make-cardinal <span class="paren2">(<span class="code">row col limit direction data</span>)</span>
  <span class="paren2">(<span class="code">ecase direction
    <span class="paren3">(<span class="code"><span class="keyword">:south</span> <span class="paren4">(<span class="code"><i><span class="symbol">loop</span></i> for i from <span class="paren5">(<span class="code">1+ row</span>)</span> below limit collecting <span class="paren5">(<span class="code">aref data i col</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:north</span> <span class="paren4">(<span class="code">reverse <span class="paren5">(<span class="code"><i><span class="symbol">loop</span></i> for i below row collecting <span class="paren6">(<span class="code">aref data i col</span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:east</span> <span class="paren4">(<span class="code"><i><span class="symbol">loop</span></i> for i from <span class="paren5">(<span class="code">1+ col</span>)</span> below limit collecting <span class="paren5">(<span class="code">aref data row i</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:west</span> <span class="paren4">(<span class="code">reverse <span class="paren5">(<span class="code"><i><span class="symbol">loop</span></i> for i below col collecting <span class="paren6">(<span class="code">aref data row i</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> check-cardinals? <span class="paren2">(<span class="code">row col data limit</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">value <span class="paren5">(<span class="code">aref data row col</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">flet</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">tallest? <span class="paren6">(<span class="code">other</span>)</span>
             <span class="paren6">(<span class="code">&gt; value other</span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">or <span class="paren5">(<span class="code">every #'tallest? <span class="paren6">(<span class="code">make-cardinal row col limit <span class="keyword">:south</span> data</span>)</span></span>)</span>
          <span class="paren5">(<span class="code">every #'tallest? <span class="paren6">(<span class="code">make-cardinal row col limit <span class="keyword">:north</span> data</span>)</span></span>)</span>
          <span class="paren5">(<span class="code">every #'tallest? <span class="paren6">(<span class="code">make-cardinal row col limit <span class="keyword">:east</span> data</span>)</span></span>)</span>
          <span class="paren5">(<span class="code">every #'tallest? <span class="paren6">(<span class="code">make-cardinal row col limit <span class="keyword">:west</span> data</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> visible? <span class="paren2">(<span class="code">row col data limit</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">cond</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">zerop row</span>)</span> t</span>)</span>
        <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">zerop col</span>)</span> t</span>)</span>
        <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">= limit row</span>)</span> t</span>)</span>
        <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">= limit col</span>)</span> t</span>)</span>
        <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">check-cardinals? row col data limit</span>)</span> t</span>)</span>
        <span class="paren3">(<span class="code">t nil</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> count-visible? <span class="paren2">(<span class="code">data</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> with width = <span class="paren3">(<span class="code">array-dimension data 0</span>)</span>
        for row below width
        sum <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for col below width
                  count <span class="paren4">(<span class="code">visible? row col data width</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">count-visible? data</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p><a id="x-28AOC-2E2022-2E08-3APART-2-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E08-3A-3ASCENIC-SCORE-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E08-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.08:PART-2-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.08::SCENIC-SCORE%20FUNCTION%29%20:END%20%28AOC.2022.08::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> scenic-score <span class="paren2">(<span class="code">row col limit data</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">value <span class="paren5">(<span class="code">aref data row col</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">flet</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">view-distance <span class="paren6">(<span class="code">trees</span>)</span>
             <span class="paren6">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren1">(<span class="code"><span class="paren2">(<span class="code">blocker <span class="paren3">(<span class="code">position-if <span class="paren4">(<span class="code">op <span class="paren5">(<span class="code">&gt;= _ value</span>)</span></span>)</span> trees</span>)</span></span>)</span></span>)</span>
               <span class="paren1">(<span class="code">or <span class="paren2">(<span class="code">and blocker <span class="paren3">(<span class="code">1+ blocker</span>)</span></span>)</span>
                   <span class="paren2">(<span class="code">length trees</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">results <span class="paren1">(<span class="code">mapcar <span class="paren2">(<span class="code">op <span class="paren3">(<span class="code">view-distance <span class="paren4">(<span class="code">make-cardinal row col limit _ data</span>)</span></span>)</span></span>)</span>
                             '<span class="paren2">(<span class="code"><span class="keyword">:north</span> <span class="keyword">:west</span> <span class="keyword">:east</span> <span class="keyword">:south</span></span>)</span></span>)</span></span>)</span></span>)</span>
        <span class="paren5">(<span class="code">values <span class="paren6">(<span class="code">apply '* results</span>)</span> results</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> max-score <span class="paren2">(<span class="code">data</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> with width = <span class="paren3">(<span class="code">array-dimension data 0</span>)</span>
        for row below width
        maximize <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for col below width
                       maximize <span class="paren4">(<span class="code">scenic-score row col width data</span>)</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28AOC-2E2022-2E09-3A-402022-2E09-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.09:@2022.09%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.08:@2022.08%20MGL-PAX:SECTION" title="Treetop Tree House">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.10:@2022.10%20MGL-PAX:SECTION" title="Cathode-Ray Tube">&#8594;</a> <a href="#AOC.2022.09:@2022.09%20MGL-PAX:SECTION" title="Rope Bridge">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day09.lisp#L9">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.09:@2022.09%20MGL-PAX:SECTION">5.9 Rope Bridge</a></h3>

<h6>[in package AOC.2022.09 with nicknames 2022.09]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/9" >Day 09</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day09.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:   7,255kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:   1,050kb  Answer:  5779
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   4.001ms  Memory:   3,417kb  Answer:  2331
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Parsing</strong></p>

<p><a id="x-28AOC-2E2022-2E09-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E09-3A-3A-2AFIRST-RULE-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E09-3A-3AUPDATE-ROPE-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.09:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.09::*FIRST-RULE*%20VARIABLE%29%20:END%20%28AOC.2022.09::UPDATE-ROPE%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*first-rule*</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">defrule</span></i> direction <span class="paren3">(<span class="code">or <span class="character">#\U</span> <span class="character">#\R</span> <span class="character">#\D</span> <span class="character">#\L</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> motion <span class="paren2">(<span class="code">and direction <span class="string">" "</span> integer</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:lambda</span> <span class="paren3">(<span class="code">list</span>)</span> <span class="paren3">(<span class="code">remove <span class="string">" "</span> list <span class="keyword">:test</span> #'equal</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input <span class="paren3">(<span class="code">partial #'parse 'motion</span>)</span> <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p><a id="x-28AOC-2E2022-2E09-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E09-3A-3AUPDATE-ROPE-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E09-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.09:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.09::UPDATE-ROPE%20FUNCTION%29%20:END%20%28AOC.2022.09::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> update-rope <span class="paren2">(<span class="code">move rope visited</span>)</span>
  <span class="paren2">(<span class="code">destructuring-bind <span class="paren3">(<span class="code">direction distance</span>)</span> move
    <span class="paren3">(<span class="code">dotimes <span class="paren4">(<span class="code">i distance</span>)</span>
      <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">first rope</span>)</span> <span class="paren5">(<span class="code">move-head <span class="paren6">(<span class="code">first rope</span>)</span> direction</span>)</span></span>)</span>
      <span class="paren4">(<span class="code"><i><span class="symbol">loop</span></i> for <span class="paren5">(<span class="code">head tail</span>)</span> on rope while tail
            for i = 1 then <span class="paren5">(<span class="code">1+ i</span>)</span>
            do <span class="paren5">(<span class="code">setf <span class="paren6">(<span class="code">nth i rope</span>)</span> <span class="paren6">(<span class="code">move-tail head tail</span>)</span></span>)</span>
            finally <span class="paren5">(<span class="code">setf <span class="paren6">(<span class="code">gethash head visited</span>)</span> t</span>)</span></span>)</span></span>)</span>
    rope</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defstruct</span></i> <span class="paren2">(<span class="code">point <span class="paren3">(<span class="code"><span class="keyword">:type</span> list</span>)</span></span>)</span> x y</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> move-head <span class="paren2">(<span class="code">point direction</span>)</span>
  <span class="paren2">(<span class="code">case <span class="paren3">(<span class="code">char direction 0</span>)</span>
    <span class="paren3">(<span class="code"><span class="character">#\U</span> <span class="paren4">(<span class="code">incf <span class="paren5">(<span class="code">point-y point</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="character">#\R</span> <span class="paren4">(<span class="code">incf <span class="paren5">(<span class="code">point-x point</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="character">#\D</span> <span class="paren4">(<span class="code">decf <span class="paren5">(<span class="code">point-y point</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="character">#\L</span> <span class="paren4">(<span class="code">decf <span class="paren5">(<span class="code">point-x point</span>)</span></span>)</span></span>)</span></span>)</span>
  point</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> move-tail <span class="paren2">(<span class="code">head tail</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let*</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">new-tail <span class="paren5">(<span class="code">copy-list tail</span>)</span></span>)</span>
         <span class="paren4">(<span class="code">x-diff <span class="paren5">(<span class="code">- <span class="paren6">(<span class="code">point-x head</span>)</span> <span class="paren6">(<span class="code">point-x tail</span>)</span></span>)</span></span>)</span>
         <span class="paren4">(<span class="code">y-diff <span class="paren5">(<span class="code">- <span class="paren6">(<span class="code">point-y head</span>)</span> <span class="paren6">(<span class="code">point-y tail</span>)</span></span>)</span></span>)</span>
         <span class="paren4">(<span class="code">distance <span class="paren5">(<span class="code">floor <span class="paren6">(<span class="code">sqrt <span class="paren1">(<span class="code">+ <span class="paren2">(<span class="code">expt x-diff 2</span>)</span> <span class="paren2">(<span class="code">expt y-diff 2</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">when <span class="paren4">(<span class="code">&gt; distance 1</span>)</span>
      <span class="paren4">(<span class="code"><i><span class="symbol">cond</span></i> <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">&gt; x-diff  1</span>)</span> <span class="paren1">(<span class="code">zerop y-diff</span>)</span></span>)</span> <span class="paren6">(<span class="code">incf <span class="paren1">(<span class="code">point-x new-tail</span>)</span></span>)</span></span>)</span>
            <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">&lt; x-diff -1</span>)</span> <span class="paren1">(<span class="code">zerop y-diff</span>)</span></span>)</span> <span class="paren6">(<span class="code">decf <span class="paren1">(<span class="code">point-x new-tail</span>)</span></span>)</span></span>)</span>
            <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">&gt; y-diff  1</span>)</span> <span class="paren1">(<span class="code">zerop x-diff</span>)</span></span>)</span> <span class="paren6">(<span class="code">incf <span class="paren1">(<span class="code">point-y new-tail</span>)</span></span>)</span></span>)</span>
            <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">&lt; y-diff -1</span>)</span> <span class="paren1">(<span class="code">zerop x-diff</span>)</span></span>)</span> <span class="paren6">(<span class="code">decf <span class="paren1">(<span class="code">point-y new-tail</span>)</span></span>)</span></span>)</span>
            <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">plusp x-diff</span>)</span> <span class="paren1">(<span class="code">plusp y-diff</span>)</span></span>)</span>
             <span class="paren6">(<span class="code">incf <span class="paren1">(<span class="code">point-x new-tail</span>)</span></span>)</span>
             <span class="paren6">(<span class="code">incf <span class="paren1">(<span class="code">point-y new-tail</span>)</span></span>)</span></span>)</span>
            <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">minusp x-diff</span>)</span> <span class="paren1">(<span class="code">minusp y-diff</span>)</span></span>)</span>
             <span class="paren6">(<span class="code">decf <span class="paren1">(<span class="code">point-x new-tail</span>)</span></span>)</span>
             <span class="paren6">(<span class="code">decf <span class="paren1">(<span class="code">point-y new-tail</span>)</span></span>)</span></span>)</span>
            <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">plusp x-diff</span>)</span> <span class="paren1">(<span class="code">minusp y-diff</span>)</span></span>)</span>
             <span class="paren6">(<span class="code">incf <span class="paren1">(<span class="code">point-x new-tail</span>)</span></span>)</span>
             <span class="paren6">(<span class="code">decf <span class="paren1">(<span class="code">point-y new-tail</span>)</span></span>)</span></span>)</span>
            <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">minusp x-diff</span>)</span> <span class="paren1">(<span class="code">plusp y-diff</span>)</span></span>)</span>
             <span class="paren6">(<span class="code">decf <span class="paren1">(<span class="code">point-x new-tail</span>)</span></span>)</span>
             <span class="paren6">(<span class="code">incf <span class="paren1">(<span class="code">point-y new-tail</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
    new-tail</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> count-visited <span class="paren2">(<span class="code">moves &amp;key <span class="paren3">(<span class="code">tail-count 1</span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">visited <span class="paren5">(<span class="code">make-hash-table <span class="keyword">:test</span> #'equal</span>)</span></span>)</span>
        <span class="paren4">(<span class="code">rope <span class="paren5">(<span class="code"><i><span class="symbol">loop</span></i> repeat <span class="paren6">(<span class="code">1+ tail-count</span>)</span> collect <span class="paren6">(<span class="code">make-point <span class="keyword">:x</span> 0 <span class="keyword">:y</span> 0</span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">dolist <span class="paren4">(<span class="code">move moves</span>)</span>
      <span class="paren4">(<span class="code">update-rope move rope visited</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">hash-table-count visited</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">count-visited data</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p><a id="x-28AOC-2E2022-2E10-3A-402022-2E10-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.10:@2022.10%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.09:@2022.09%20MGL-PAX:SECTION" title="Rope Bridge">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.11:@2022.11%20MGL-PAX:SECTION" title="Monkey in the Middle">&#8594;</a> <a href="#AOC.2022.10:@2022.10%20MGL-PAX:SECTION" title="Cathode-Ray Tube">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day10.lisp#L16">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.10:@2022.10%20MGL-PAX:SECTION">5.10 Cathode-Ray Tube</a></h3>

<h6>[in package AOC.2022.10 with nicknames 2022.10]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/10" >Day 10</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day10.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     548kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:   2,042kb  
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:   1,098kb  
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Parsing</strong></p>

<p><a id="x-28AOC-2E2022-2E10-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E10-3A-3A-2AFIRST-RULE-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E10-3A-3ACPU-20CLASS-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.10:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.10::*FIRST-RULE*%20VARIABLE%29%20:END%20%28AOC.2022.10::CPU%20CLASS%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*first-rule*</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">defrule</span></i> opcode <span class="paren3">(<span class="code">or <span class="string">"noop"</span> <span class="string">"addx"</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:lambda</span> <span class="paren4">(<span class="code">string</span>)</span> <span class="paren4">(<span class="code">make-keyword <span class="paren5">(<span class="code">string-upcase string</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> args <span class="paren2">(<span class="code">and <span class="string">" "</span> integer</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> second</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> instruction <span class="paren2">(<span class="code">and opcode <span class="paren3">(<span class="code">? args</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input <span class="paren3">(<span class="code">partial #'parse 'instruction</span>)</span> <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p><a id="x-28AOC-2E2022-2E10-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E10-3A-3ACPU-20CLASS-29-20-3AEND-20-28AOC-2E2022-2E10-3A-3ARENDER-20-28METHOD-20NIL-20-28AOC-2E2022-2E10-3A-3ACPU-20T-29-29-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.10:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.10::CPU%20CLASS%29%20:END%20%28AOC.2022.10::RENDER%20%28METHOD%20NIL%20%28AOC.2022.10::CPU%20T%29%29%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defstruct</span></i> cpu
  <span class="paren2">(<span class="code">cycles 0 <span class="keyword">:type</span> fixnum</span>)</span>
  <span class="paren2">(<span class="code">x-reg 1 <span class="keyword">:type</span> fixnum</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*cycle-times*</span> '<span class="paren2">(<span class="code"><span class="keyword">:noop</span> 1 <span class="keyword">:addx</span> 2</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> execute <span class="keyword">:after</span> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">cpu cpu</span>)</span> opcode arg</span>)</span>
  <span class="paren2">(<span class="code">incf <span class="paren3">(<span class="code">cpu-cycles cpu</span>)</span> <span class="paren3">(<span class="code">getf <span class="special">*cycle-times*</span> opcode</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> execute <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">cpu cpu</span>)</span> <span class="paren3">(<span class="code">opcode <span class="paren4">(<span class="code">eql <span class="keyword">:noop</span></span>)</span></span>)</span> arg</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> execute <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">cpu cpu</span>)</span> <span class="paren3">(<span class="code">opcode <span class="paren4">(<span class="code">eql <span class="keyword">:addx</span></span>)</span></span>)</span> arg</span>)</span>
  <span class="paren2">(<span class="code">incf <span class="paren3">(<span class="code">cpu-x-reg cpu</span>)</span> arg</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> run-program <span class="paren2">(<span class="code">data &amp;key collect-fn</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">cpu <span class="paren5">(<span class="code">make-cpu</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for <span class="paren4">(<span class="code">opcode arg</span>)</span> = <span class="paren4">(<span class="code">pop data</span>)</span> while opcode
          collect <span class="paren4">(<span class="code">funcall collect-fn cpu opcode</span>)</span>
          do <span class="paren4">(<span class="code">execute cpu opcode arg</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> new-cycles <span class="paren2">(<span class="code">cpu opcode</span>)</span>
  <span class="paren2">(<span class="code">+ <span class="paren3">(<span class="code">cpu-cycles cpu</span>)</span> <span class="paren3">(<span class="code">getf <span class="special">*cycle-times*</span> opcode</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> sampled-cycle? <span class="paren2">(<span class="code">cpu opcode next-sample</span>)</span>
  <span class="paren2">(<span class="code">&lt;= <span class="paren3">(<span class="code">cpu-cycles cpu</span>)</span> next-sample <span class="paren3">(<span class="code">new-cycles cpu opcode</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> make-sample-fn <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">timings '<span class="paren5">(<span class="code">20 60 100 140 180 220</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="paren4">(<span class="code">cpu opcode</span>)</span>
      <span class="paren4">(<span class="code">when <span class="paren5">(<span class="code">sampled-cycle? cpu opcode <span class="paren6">(<span class="code">or <span class="paren1">(<span class="code">first timings</span>)</span> 0</span>)</span></span>)</span>
        <span class="paren5">(<span class="code">* <span class="paren6">(<span class="code">pop timings</span>)</span> <span class="paren6">(<span class="code">cpu-x-reg cpu</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> signal-strength <span class="paren2">(<span class="code">output</span>)</span>
  <span class="paren2">(<span class="code">reduce #'+ <span class="paren3">(<span class="code">remove nil output</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">signal-strength <span class="paren3">(<span class="code">run-program data <span class="keyword">:collect-fn</span> <span class="paren4">(<span class="code">make-sample-fn</span>)</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p><a id="x-28AOC-2E2022-2E10-3APART-2-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E10-3A-3ARENDER-20-28METHOD-20NIL-20-28AOC-2E2022-2E10-3A-3ACPU-20T-29-29-29-20-3AEND-20-28AOC-2E2022-2E10-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.10:PART-2-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.10::RENDER%20%28METHOD%20NIL%20%28AOC.2022.10::CPU%20T%29%29%29%20:END%20%28AOC.2022.10::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> render <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">cpu cpu</span>)</span> opcode</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">with-slots</span></i> <span class="paren3">(<span class="code">cycles x-reg</span>)</span> cpu
    <span class="paren3">(<span class="code"><i><span class="symbol">with-output-to-string</span></i> <span class="paren4">(<span class="code">out</span>)</span>
      <span class="paren4">(<span class="code">dotimes <span class="paren5">(<span class="code">i <span class="paren6">(<span class="code">getf <span class="special">*cycle-times*</span> opcode</span>)</span></span>)</span>
        <span class="paren5">(<span class="code"><i><span class="symbol">let*</span></i> <span class="paren6">(<span class="code"><span class="paren1">(<span class="code">crt-pixel <span class="paren2">(<span class="code">mod <span class="paren3">(<span class="code">+ cycles i</span>)</span> 40</span>)</span></span>)</span>
               <span class="paren1">(<span class="code">active-pixel? <span class="paren2">(<span class="code">&lt;= <span class="paren3">(<span class="code">1- x-reg</span>)</span> crt-pixel <span class="paren3">(<span class="code">1+ x-reg</span>)</span></span>)</span></span>)</span></span>)</span>
          <span class="paren6">(<span class="code">format out <span class="paren1">(<span class="code"><i><span class="symbol">if</span></i> active-pixel? <span class="string">"#"</span> <span class="string">"."</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> buffer-display <span class="paren2">(<span class="code">output</span>)</span>
  <span class="paren2">(<span class="code">~&gt;&gt; <span class="paren3">(<span class="code">reduce #'concat output</span>)</span>
       <span class="paren3">(<span class="code">batches _ 40</span>)</span>
       <span class="paren3">(<span class="code">string-join _ <span class="character">#\Newline</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28AOC-2E2022-2E11-3A-402022-2E11-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.11:@2022.11%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.10:@2022.10%20MGL-PAX:SECTION" title="Cathode-Ray Tube">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.12:@2022.12%20MGL-PAX:SECTION" title="Hill Climbing Algorithm">&#8594;</a> <a href="#AOC.2022.11:@2022.11%20MGL-PAX:SECTION" title="Monkey in the Middle">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day11.lisp#L13">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.11:@2022.11%20MGL-PAX:SECTION">5.11 Monkey in the Middle</a></h3>

<h6>[in package AOC.2022.11 with nicknames 2022.11]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/11" >Day 11</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day11.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     205kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:   1,802kb  Answer:  58322
</code></pre>

<p>Part 2:</p>

<pre><code>Time:  76.001ms  Memory:   9,792kb  Answer:  13985281920
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Parsing</strong></p>

<p><a id="x-28AOC-2E2022-2E11-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E11-3A-3A-2AFIRST-RULE-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E11-3A-3AMONKEY-20CLASS-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.11:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.11::*FIRST-RULE*%20VARIABLE%29%20:END%20%28AOC.2022.11::MONKEY%20CLASS%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*first-rule*</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">defrule</span></i> monkey-number <span class="paren3">(<span class="code">and <span class="string">"Monkey "</span> integer <span class="string">":"</span> <span class="character">#\Newline</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:function</span> second</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> item-list <span class="paren2">(<span class="code">+ <span class="paren3">(<span class="code">or integer <span class="string">", "</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:lambda</span> <span class="paren3">(<span class="code">list</span>)</span> <span class="paren3">(<span class="code">remove-if-not #'integerp list</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> starting-items <span class="paren2">(<span class="code">and spaces <span class="string">"Starting items: "</span> item-list <span class="character">#\Newline</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:lambda</span> <span class="paren3">(<span class="code">list</span>)</span> <span class="paren3">(<span class="code">apply 'queue <span class="paren4">(<span class="code">third list</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> operator <span class="paren2">(<span class="code">or <span class="string">"+"</span> <span class="string">"*"</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> find-symbol</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> inspect-op <span class="paren2">(<span class="code">and spaces <span class="string">"Operation: new = old "</span>
                         operator <span class="string">" "</span> <span class="paren3">(<span class="code">or integer <span class="string">"old"</span></span>)</span> <span class="character">#\Newline</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:destructure</span> <span class="paren3">(<span class="code">spaces title operator space operand newline</span>)</span>
    <span class="paren3">(<span class="code">declare <span class="paren4">(<span class="code">ignore spaces title space newline</span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">if</span></i> <span class="paren4">(<span class="code">equal operand <span class="string">"old"</span></span>)</span>
        <span class="paren4">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="paren5">(<span class="code">x</span>)</span> <span class="paren5">(<span class="code">funcall operator x x</span>)</span></span>)</span>
        <span class="paren4">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="paren5">(<span class="code">x</span>)</span> <span class="paren5">(<span class="code">funcall operator operand x</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> test-op <span class="paren2">(<span class="code">and spaces <span class="string">"Test: divisible by "</span> integer <span class="character">#\Newline</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> third</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> true-op <span class="paren2">(<span class="code">and spaces <span class="string">"If true: throw to monkey "</span> integer <span class="character">#\Newline</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> third</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> false-op <span class="paren2">(<span class="code">and spaces <span class="string">"If false: throw to monkey "</span> integer <span class="paren3">(<span class="code">? <span class="character">#\Newline</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:function</span> third</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> monkey <span class="paren2">(<span class="code">and monkey-number starting-items inspect-op
                     test-op true-op false-op <span class="paren3">(<span class="code">? <span class="character">#\Newline</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:destructure</span> <span class="paren3">(<span class="code">num items op divisor true-fn false-fn newline</span>)</span>
    <span class="paren3">(<span class="code">declare <span class="paren4">(<span class="code">ignore newline</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">make-monkey <span class="keyword">:number</span> num <span class="keyword">:items</span> items <span class="keyword">:operation</span> op <span class="keyword">:divisor</span> divisor
                 <span class="keyword">:true-recv</span> true-fn <span class="keyword">:false-recv</span> false-fn <span class="keyword">:inspected</span> 0</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input <span class="paren3">(<span class="code">partial #'parse 'monkey</span>)</span> <span class="keyword">:separator</span> <span class="string">"</span><span class="string">\\</span><span class="string">n</span><span class="string">\\</span><span class="string">n"</span> <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p><a id="x-28AOC-2E2022-2E11-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E11-3A-3AMONKEY-20CLASS-29-20-3AEND-20-28AOC-2E2022-2E11-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.11:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.11::MONKEY%20CLASS%29%20:END%20%28AOC.2022.11::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defstruct</span></i> monkey
  number items operation divisor true-recv false-recv inspected</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> pass-item <span class="paren2">(<span class="code">item <span class="paren3">(<span class="code">monkey monkey</span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">with-slots</span></i> <span class="paren3">(<span class="code">items</span>)</span> monkey
    <span class="paren3">(<span class="code">enq item items</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> play-round <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">monkey monkey</span>)</span> all-monkeys worry-fn</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">with-slots</span></i> <span class="paren3">(<span class="code">items operation divisor true-recv false-recv inspected</span>)</span> monkey
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for item = <span class="paren4">(<span class="code">deq items</span>)</span> while item
          do <span class="paren4">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">worry-level <span class="paren1">(<span class="code">funcall worry-fn <span class="paren2">(<span class="code">funcall operation item</span>)</span></span>)</span></span>)</span></span>)</span>
               <span class="paren5">(<span class="code">incf inspected</span>)</span>
               <span class="paren5">(<span class="code"><i><span class="symbol">if</span></i> <span class="paren6">(<span class="code">zerop <span class="paren1">(<span class="code">mod worry-level divisor</span>)</span></span>)</span>
                   <span class="paren6">(<span class="code">pass-item worry-level <span class="paren1">(<span class="code">nth true-recv all-monkeys</span>)</span></span>)</span>
                   <span class="paren6">(<span class="code">pass-item worry-level <span class="paren1">(<span class="code">nth false-recv all-monkeys</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> compute-monkey-business <span class="paren2">(<span class="code">monkeys</span>)</span>
  <span class="paren2">(<span class="code">~&gt;&gt; <span class="paren3">(<span class="code">mapcar #'monkey-inspected monkeys</span>)</span>
       <span class="paren3">(<span class="code">sort _ #'&gt;</span>)</span>
       <span class="paren3">(<span class="code">subseq _ 0 2</span>)</span>
       <span class="paren3">(<span class="code">apply '*</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> play <span class="paren2">(<span class="code">monkeys rounds worry-fn &amp;optional <span class="paren3">(<span class="code">debug nil</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">dotimes <span class="paren3">(<span class="code">i rounds</span>)</span>
    <span class="paren3">(<span class="code">when debug
      <span class="paren4">(<span class="code">format t <span class="string">"Starting round ~d~%"</span> i</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">dolist <span class="paren4">(<span class="code">monkey monkeys</span>)</span>
      <span class="paren4">(<span class="code">play-round monkey monkeys worry-fn</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">compute-monkey-business monkeys</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">play data 20 <span class="paren3">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="paren4">(<span class="code">x</span>)</span> <span class="paren4">(<span class="code">floor x 3</span>)</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p><a id="x-28AOC-2E2022-2E12-3A-402022-2E12-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.12:@2022.12%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.11:@2022.11%20MGL-PAX:SECTION" title="Monkey in the Middle">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.13:@2022.13%20MGL-PAX:SECTION" title="Distress Signal">&#8594;</a> <a href="#AOC.2022.12:@2022.12%20MGL-PAX:SECTION" title="Hill Climbing Algorithm">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day12.lisp#L16">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.12:@2022.12%20MGL-PAX:SECTION">5.12 Hill Climbing Algorithm</a></h3>

<h6>[in package AOC.2022.12 with nicknames 2022.12]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/12" >Day 12</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day12.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   8.000ms  Memory:   4,658kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:     552kb  Answer:  412
</code></pre>

<p>Part 2:</p>

<pre><code>Time:  84.002ms  Memory:  58,327kb  Answer:  402
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Parsing</strong></p>

<p><a id="x-28AOC-2E2022-2E12-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E12-3A-3A-2BNEIGHBORS-2B-20MGL-PAX-3ACONSTANT-29-20-3AEND-20-28AOC-2E2022-2E12-3A-3AYE-OLDE-BFS-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.12:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.12::+NEIGHBORS+%20MGL-PAX:CONSTANT%29%20:END%20%28AOC.2022.12::YE-OLDE-BFS%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-constant</span></i> +neighbors+
    '<span class="paren2">(<span class="code"><span class="paren3">(<span class="code">0 1</span>)</span> <span class="paren3">(<span class="code">0 -1</span>)</span> <span class="paren3">(<span class="code">1 0</span>)</span> <span class="paren3">(<span class="code">-1 0</span>)</span></span>)</span> <span class="keyword">:test</span> #'equal</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defstruct</span></i> point x y value</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-point <span class="paren2">(<span class="code">col row value</span>)</span>
  <span class="paren2">(<span class="code">make-point <span class="keyword">:x</span> col <span class="keyword">:y</span> row <span class="keyword">:value</span> value</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> height <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">point point</span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">with-slots</span></i> <span class="paren3">(<span class="code">value</span>)</span> point
    <span class="paren3">(<span class="code">case value
      <span class="paren4">(<span class="code"><span class="character">#\S</span> <span class="paren5">(<span class="code">char-code <span class="character">#\a</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code"><span class="character">#\E</span> <span class="paren5">(<span class="code">char-code <span class="character">#\z</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">t <span class="paren5">(<span class="code">char-code value</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> valid-step? <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">point point</span>)</span> <span class="paren3">(<span class="code">match point</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">&gt;= 1 <span class="paren3">(<span class="code">- <span class="paren4">(<span class="code">height match</span>)</span>
           <span class="paren4">(<span class="code">height point</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> get-neighbors <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">point point</span>)</span> nodes</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">with-slots</span></i> <span class="paren3">(<span class="code">x y value</span>)</span> point
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for <span class="paren4">(<span class="code">x-diff y-diff</span>)</span> in +neighbors+
          for coords = <span class="paren4">(<span class="code">cons <span class="paren5">(<span class="code">+ x x-diff</span>)</span>
                             <span class="paren5">(<span class="code">+ y y-diff</span>)</span></span>)</span>
          for match = <span class="paren4">(<span class="code">gethash coords nodes</span>)</span>
          when <span class="paren4">(<span class="code">and match <span class="paren5">(<span class="code">valid-step? point match</span>)</span></span>)</span>
            collect match</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> parse-graph <span class="paren2">(<span class="code">input</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">nodes <span class="paren5">(<span class="code">make-hash-table <span class="keyword">:test</span> #'equal</span>)</span></span>)</span>
        <span class="paren4">(<span class="code">edges <span class="paren5">(<span class="code">make-hash-table <span class="keyword">:test</span> #'equal</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">flet</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">import-row <span class="paren6">(<span class="code">row-idx row</span>)</span>
             <span class="paren6">(<span class="code"><i><span class="symbol">loop</span></i> for col-idx = 0 then <span class="paren1">(<span class="code">1+ col-idx</span>)</span>
                   for char across row
                   do <span class="paren1">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">point <span class="paren4">(<span class="code">build-point col-idx row-idx char</span>)</span></span>)</span></span>)</span>
                        <span class="paren2">(<span class="code">setf <span class="paren3">(<span class="code">gethash <span class="paren4">(<span class="code">cons col-idx row-idx</span>)</span> nodes</span>)</span> point</span>)</span>
                        <span class="paren2">(<span class="code">case char
                          <span class="paren3">(<span class="code"><span class="character">#\S</span> <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">gethash <span class="keyword">:start</span> nodes</span>)</span> point</span>)</span></span>)</span>
                          <span class="paren3">(<span class="code"><span class="character">#\E</span> <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">gethash <span class="keyword">:end</span> nodes</span>)</span> point</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code"><i><span class="symbol">loop</span></i> for row-idx = 0 then <span class="paren5">(<span class="code">1+ row-idx</span>)</span>
            for row in <span class="paren5">(<span class="code">split <span class="string">"</span><span class="string">\\</span><span class="string">n"</span> input</span>)</span>
            do <span class="paren5">(<span class="code">import-row row-idx row</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for point being <i><span class="symbol">the</span></i> hash-values in nodes
          do <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">gethash point edges</span>)</span> <span class="paren5">(<span class="code">get-neighbors point nodes</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">list nodes edges</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input #'parse-graph <span class="keyword">:whole</span> t <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p><a id="x-28AOC-2E2022-2E12-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E12-3A-3AYE-OLDE-BFS-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E12-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.12:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.12::YE-OLDE-BFS%20FUNCTION%29%20:END%20%28AOC.2022.12::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> ye-olde-bfs <span class="paren2">(<span class="code">edges root goal-fn</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">distance <span class="paren5">(<span class="code">make-hash-table <span class="keyword">:test</span> #'equal</span>)</span></span>)</span>
        <span class="paren4">(<span class="code">to-visit <span class="paren5">(<span class="code">queue root</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">setf <span class="paren4">(<span class="code">gethash root distance</span>)</span> 0</span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for node = <span class="paren4">(<span class="code">deq to-visit</span>)</span> while node
          when <span class="paren4">(<span class="code">funcall goal-fn node</span>)</span>
            return <span class="paren4">(<span class="code">gethash node distance</span>)</span>
          do <span class="paren4">(<span class="code">dolist <span class="paren5">(<span class="code">edge <span class="paren6">(<span class="code">gethash node edges</span>)</span></span>)</span>
               <span class="paren5">(<span class="code">unless <span class="paren6">(<span class="code">gethash edge distance</span>)</span>
                 <span class="paren6">(<span class="code">setf <span class="paren1">(<span class="code">gethash edge distance</span>)</span> <span class="paren1">(<span class="code">1+ <span class="paren2">(<span class="code">gethash node distance</span>)</span></span>)</span></span>)</span>
                 <span class="paren6">(<span class="code">enq edge to-visit</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">destructuring-bind <span class="paren3">(<span class="code">nodes edges</span>)</span> data
    <span class="paren3">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">destination <span class="paren6">(<span class="code">gethash <span class="keyword">:end</span> nodes</span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">ye-olde-bfs edges <span class="paren5">(<span class="code">gethash <span class="keyword">:start</span> nodes</span>)</span> <span class="paren5">(<span class="code">op <span class="paren6">(<span class="code">eql _ destination</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p><a id="x-28AOC-2E2022-2E13-3A-402022-2E13-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.13:@2022.13%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.12:@2022.12%20MGL-PAX:SECTION" title="Hill Climbing Algorithm">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC.2022.14:@2022.14%20MGL-PAX:SECTION" title="Regolith Reservoir">&#8594;</a> <a href="#AOC.2022.13:@2022.13%20MGL-PAX:SECTION" title="Distress Signal">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day13.lisp#L12">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.13:@2022.13%20MGL-PAX:SECTION">5.13 Distress Signal</a></h3>

<h6>[in package AOC.2022.13 with nicknames 2022.13]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/13" >Day 13</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day13.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   4.000ms  Memory:   1,246kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:   1,325kb  Answer:  5003
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:     384kb  Answer:  20280
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Parsing</strong></p>

<p><a id="x-28AOC-2E2022-2E13-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E13-3A-3ASANITIZE-PACKET-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E13-3A-3ACOMPARE-20GENERIC-FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.13:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.13::SANITIZE-PACKET%20FUNCTION%29%20:END%20%28AOC.2022.13::COMPARE%20GENERIC-FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> sanitize-packet <span class="paren2">(<span class="code">packet</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">replacements '<span class="paren5">(<span class="code"><span class="paren6">(<span class="code"><span class="string">"["</span> <span class="string">"("</span></span>)</span>
                        <span class="paren6">(<span class="code"><span class="string">"]"</span> <span class="string">")"</span></span>)</span>
                        <span class="paren6">(<span class="code"><span class="string">","</span> <span class="string">" "</span></span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">reduce <span class="paren4">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="paren5">(<span class="code">x y</span>)</span> <span class="paren5">(<span class="code">string-replace-all <span class="paren6">(<span class="code">first y</span>)</span> x <span class="paren6">(<span class="code">second y</span>)</span></span>)</span></span>)</span>
            replacements <span class="keyword">:initial-value</span> packet</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> parse-packets <span class="paren2">(<span class="code">pair</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">read-packet <span class="paren5">(<span class="code">compose #'read-from-string #'sanitize-packet</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">~&gt;&gt; <span class="paren4">(<span class="code">split <span class="string">"</span><span class="string">\\</span><span class="string">n"</span> pair</span>)</span>
         <span class="paren4">(<span class="code">mapcar read-packet</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input #'parse-packets <span class="keyword">:separator</span> <span class="string">"</span><span class="string">\\</span><span class="string">n</span><span class="string">\\</span><span class="string">n"</span> <span class="keyword">:input</span> input</span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p><a id="x-28AOC-2E2022-2E13-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E13-3A-3ACOMPARE-20GENERIC-FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E13-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.13:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.13::COMPARE%20GENERIC-FUNCTION%29%20:END%20%28AOC.2022.13::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defgeneric</span></i> compare <span class="paren2">(<span class="code">left right</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:documentation</span> <span class="string">"Compare two values according to the rules of 2022.13"</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> compare <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">left integer</span>)</span> <span class="paren3">(<span class="code">right integer</span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">cond</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">&lt; left right</span>)</span> t</span>)</span>
        <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">&gt; left right</span>)</span> nil</span>)</span>
        <span class="paren3">(<span class="code">t <span class="keyword">:equal</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> compare <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">left list</span>)</span> <span class="paren3">(<span class="code">right list</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">dotimes <span class="paren3">(<span class="code">i <span class="paren4">(<span class="code">max <span class="paren5">(<span class="code">length left</span>)</span> <span class="paren5">(<span class="code">length right</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">when <span class="paren4">(<span class="code">null left</span>)</span> <span class="paren4">(<span class="code"><i><span class="symbol">return-from</span></i> compare t</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">when <span class="paren4">(<span class="code">null right</span>)</span> <span class="paren4">(<span class="code"><i><span class="symbol">return-from</span></i> compare nil</span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">result <span class="paren6">(<span class="code">compare <span class="paren1">(<span class="code">pop left</span>)</span> <span class="paren1">(<span class="code">pop right</span>)</span></span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">unless <span class="paren5">(<span class="code">eql result <span class="keyword">:equal</span></span>)</span>
        <span class="paren5">(<span class="code"><i><span class="symbol">return-from</span></i> compare result</span>)</span></span>)</span></span>)</span></span>)</span>
  <span class="keyword">:equal</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> compare <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">left list</span>)</span> <span class="paren3">(<span class="code">right integer</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">compare left <span class="paren3">(<span class="code">list right</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> compare <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">left integer</span>)</span> <span class="paren3">(<span class="code">right list</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">compare <span class="paren3">(<span class="code">list left</span>)</span> right</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> for i = 0 then <span class="paren3">(<span class="code">1+ i</span>)</span>
        for <span class="paren3">(<span class="code">left right</span>)</span> in data
        when <span class="paren3">(<span class="code">compare left right</span>)</span>
          sum <span class="paren3">(<span class="code">1+ i</span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p><a id="x-28AOC-2E2022-2E14-3A-402022-2E14-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2022.14:@2022.14%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.13:@2022.13%20MGL-PAX:SECTION" title="Distress Signal">&#8592;</a> <a href="#AOC:@AOC.2022%20MGL-PAX:SECTION" title="Advent 2022">&#8593;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8594;</a> <a href="#AOC.2022.14:@2022.14%20MGL-PAX:SECTION" title="Regolith Reservoir">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2022/day14.lisp#L14">&#955;</a></span></span></p>

<h3><a href="#AOC.2022.14:@2022.14%20MGL-PAX:SECTION">5.14 Regolith Reservoir</a></h3>

<h6>[in package AOC.2022.14 with nicknames 2022.14]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2022/day/14" >Day 14</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2022/day14.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   4.000ms  Memory:   6,687kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:  12.000ms  Memory:  12,662kb  Answer:  805
</code></pre>

<p>Part 2:</p>

<pre><code>Time: 540.013ms  Memory: 480,214kb  Answer:  25161
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Parsing</strong></p>

<p><a id="x-28AOC-2E2022-2E14-3APARSING-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E14-3A-3A-2AFIRST-RULE-2A-20VARIABLE-29-20-3AEND-20-28AOC-2E2022-2E14-3A-3AFIND-RANGE-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.14:PARSING-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.14::*FIRST-RULE*%20VARIABLE%29%20:END%20%28AOC.2022.14::FIND-RANGE%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*first-rule*</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">defrule</span></i> point <span class="paren3">(<span class="code">and integer <span class="character">#\,</span> integer <span class="paren4">(<span class="code">? <span class="string">" -&gt; "</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:lambda</span> <span class="paren4">(<span class="code">point</span>)</span> <span class="paren4">(<span class="code">list <span class="paren5">(<span class="code">first point</span>)</span> <span class="paren5">(<span class="code">third point</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defrule</span></i> cave-path <span class="paren2">(<span class="code">+ point</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-data <span class="paren2">(<span class="code">&amp;optional input</span>)</span>
  <span class="paren2">(<span class="code">read-day-input <span class="paren3">(<span class="code">partial #'parse 'cave-path</span>)</span> <span class="keyword">:input</span> input</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> find-bounds <span class="paren2">(<span class="code">cave floor-mod</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> for point in <span class="paren3">(<span class="code">hash-table-keys cave</span>)</span>
        minimizing <span class="paren3">(<span class="code">point-x point</span>)</span> into min-x
        maximizing <span class="paren3">(<span class="code">point-x point</span>)</span> into max-x
        minimizing <span class="paren3">(<span class="code">point-y point</span>)</span> into min-y
        maximizing <span class="paren3">(<span class="code">+ <span class="paren4">(<span class="code">point-y point</span>)</span> floor-mod</span>)</span> into max-y
        finally <span class="paren3">(<span class="code">return <span class="paren4">(<span class="code">list min-x max-x min-y max-y</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defstruct</span></i> <span class="paren2">(<span class="code">point <span class="paren3">(<span class="code"><span class="keyword">:type</span> list</span>)</span></span>)</span> x y</span>)</span>
</span></code></pre>

<p><strong>Part 1</strong></p>

<p><a id="x-28AOC-2E2022-2E14-3APART-1-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E14-3A-3AFIND-RANGE-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E14-3A-3ARENDER-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.14:PART-1-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.14::FIND-RANGE%20FUNCTION%29%20:END%20%28AOC.2022.14::RENDER%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> find-range <span class="paren2">(<span class="code">point1 point2</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">direction <span class="paren5">(<span class="code"><i><span class="symbol">if</span></i> <span class="paren6">(<span class="code">= <span class="paren1">(<span class="code">point-x point1</span>)</span> <span class="paren1">(<span class="code">point-x point2</span>)</span></span>)</span> <span class="keyword">:vertical</span> <span class="keyword">:horizontal</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">case direction
      <span class="paren4">(<span class="code"><span class="keyword">:horizontal</span> <span class="paren5">(<span class="code">values direction <span class="paren6">(<span class="code">sort <span class="paren1">(<span class="code">list <span class="paren2">(<span class="code">point-x point1</span>)</span> <span class="paren2">(<span class="code">point-x point2</span>)</span></span>)</span> #'&lt;</span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code"><span class="keyword">:vertical</span> <span class="paren5">(<span class="code">values direction <span class="paren6">(<span class="code">sort <span class="paren1">(<span class="code">list <span class="paren2">(<span class="code">point-y point1</span>)</span> <span class="paren2">(<span class="code">point-y point2</span>)</span></span>)</span> #'&lt;</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> build-cave <span class="paren2">(<span class="code">data &amp;key <span class="paren3">(<span class="code">floor-mod 0</span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">cave <span class="paren5">(<span class="code">make-hash-table <span class="keyword">:test</span> #'equal</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">flet</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">add-segment <span class="paren6">(<span class="code">point1 point2</span>)</span>
             <span class="paren6">(<span class="code">multiple-value-bind <span class="paren1">(<span class="code">direction range</span>)</span> <span class="paren1">(<span class="code">find-range point1 point2</span>)</span>
               <span class="paren1">(<span class="code"><i><span class="symbol">loop</span></i> for i from <span class="paren2">(<span class="code">first range</span>)</span> upto <span class="paren2">(<span class="code">second range</span>)</span>
                     do <span class="paren2">(<span class="code">case direction
                          <span class="paren3">(<span class="code"><span class="keyword">:horizontal</span> <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">gethash <span class="paren6">(<span class="code">list i <span class="paren1">(<span class="code">point-y point1</span>)</span></span>)</span> cave</span>)</span> <span class="keyword">:rock</span></span>)</span></span>)</span>
                          <span class="paren3">(<span class="code"><span class="keyword">:vertical</span> <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">gethash <span class="paren6">(<span class="code">list <span class="paren1">(<span class="code">point-x point1</span>)</span> i</span>)</span> cave</span>)</span> <span class="keyword">:rock</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">dolist <span class="paren5">(<span class="code">cave-path data</span>)</span>
        <span class="paren5">(<span class="code"><i><span class="symbol">loop</span></i> for <span class="paren6">(<span class="code">point1 point2</span>)</span> on cave-path by #'rest
              while point2 do <span class="paren6">(<span class="code">add-segment point1 point2</span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">setf <span class="paren5">(<span class="code">gethash <span class="keyword">:bounds</span> cave</span>)</span> <span class="paren5">(<span class="code">find-bounds cave floor-mod</span>)</span></span>)</span></span>)</span>
    cave</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> next-position <span class="paren2">(<span class="code">point cave</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">options <span class="paren5">(<span class="code">destructuring-bind <span class="paren6">(<span class="code">x y</span>)</span> point
                   <span class="paren6">(<span class="code">list <span class="paren1">(<span class="code">make-point <span class="keyword">:x</span> x      <span class="keyword">:y</span> <span class="paren2">(<span class="code">1+ y</span>)</span></span>)</span>
                         <span class="paren1">(<span class="code">make-point <span class="keyword">:x</span> <span class="paren2">(<span class="code">1- x</span>)</span> <span class="keyword">:y</span> <span class="paren2">(<span class="code">1+ y</span>)</span></span>)</span>
                         <span class="paren1">(<span class="code">make-point <span class="keyword">:x</span> <span class="paren2">(<span class="code">1+ x</span>)</span> <span class="keyword">:y</span> <span class="paren2">(<span class="code">1+ y</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">find-if-not <span class="paren4">(<span class="code">op <span class="paren5">(<span class="code">gethash _ cave</span>)</span></span>)</span> options</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> place-sand <span class="paren2">(<span class="code">cave &amp;key <span class="paren3">(<span class="code">abyss? t</span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> with sand = <span class="paren3">(<span class="code">make-point <span class="keyword">:x</span> 500 <span class="keyword">:y</span> 0</span>)</span>
        with bottom = <span class="paren3">(<span class="code">lastcar <span class="paren4">(<span class="code">gethash <span class="keyword">:bounds</span> cave</span>)</span></span>)</span>
        do <span class="paren3">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">next <span class="paren6">(<span class="code">next-position sand cave</span>)</span></span>)</span></span>)</span>
             <span class="paren4">(<span class="code"><i><span class="symbol">cond</span></i> <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">null next</span>)</span>
                    <span class="paren6">(<span class="code">return <span class="paren1">(<span class="code">setf <span class="paren2">(<span class="code">gethash sand cave</span>)</span> <span class="keyword">:rest</span></span>)</span></span>)</span></span>)</span>
                   <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and abyss? <span class="paren1">(<span class="code">&gt; <span class="paren2">(<span class="code">point-y next</span>)</span> bottom</span>)</span></span>)</span>
                    <span class="paren6">(<span class="code">return <span class="keyword">:abyss</span></span>)</span></span>)</span>
                   <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">and <span class="paren1">(<span class="code">null abyss?</span>)</span> <span class="paren1">(<span class="code">= <span class="paren2">(<span class="code">point-y next</span>)</span> bottom</span>)</span></span>)</span>
                    <span class="paren6">(<span class="code">return <span class="paren1">(<span class="code">setf <span class="paren2">(<span class="code">gethash sand cave</span>)</span> <span class="keyword">:rest</span></span>)</span></span>)</span></span>)</span>
                   <span class="paren5">(<span class="code">t <span class="paren6">(<span class="code">setf sand next</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> count-sand-grains <span class="paren2">(<span class="code">cave &amp;key <span class="paren3">(<span class="code">abyss? t</span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">loop</span></i> for result = <span class="paren3">(<span class="code">place-sand cave <span class="keyword">:abyss?</span> abyss?</span>)</span>
        until <span class="paren3">(<span class="code">or <span class="paren4">(<span class="code">eql result <span class="keyword">:abyss</span></span>)</span> <span class="paren4">(<span class="code">gethash '<span class="paren5">(<span class="code">500 0</span>)</span> cave</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">count <span class="keyword">:rest</span> <span class="paren3">(<span class="code">hash-table-values cave</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> part-1 <span class="paren2">(<span class="code">&amp;optional <span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">build-data</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">count-sand-grains <span class="paren3">(<span class="code">build-cave data</span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><strong>Part 2</strong></p>

<p><a id="x-28AOC-2E2022-2E14-3APART-2-SOURCE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28AOC-2E2022-2E14-3A-3ARENDER-20FUNCTION-29-20-3AEND-20-28AOC-2E2022-2E14-3A-3APART-2-20FUNCTION-29-29-20-3AHEADER-NL-20-22-60-60-60common-lisp-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="AOC.2022.14:PART-2-SOURCE%20%28MGL-PAX:INCLUDE%20%28:START%20%28AOC.2022.14::RENDER%20FUNCTION%29%20:END%20%28AOC.2022.14::PART-2%20FUNCTION%29%29%20:HEADER-NL%20%22%60%60%60common-lisp%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> render <span class="paren2">(<span class="code">cave &amp;key <span class="paren3">(<span class="code">floor <span class="keyword">:floor</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">destructuring-bind <span class="paren3">(<span class="code">min-x max-x min-y max-y</span>)</span> <span class="paren3">(<span class="code">gethash <span class="keyword">:bounds</span> cave</span>)</span>
    <span class="paren3">(<span class="code">declare <span class="paren4">(<span class="code">ignore min-y</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">dotimes <span class="paren4">(<span class="code">y <span class="paren5">(<span class="code">1+ max-y</span>)</span></span>)</span>
      <span class="paren4">(<span class="code"><i><span class="symbol">loop</span></i> for i from <span class="paren5">(<span class="code">- min-x 8</span>)</span> upto <span class="paren5">(<span class="code">+ max-x 8</span>)</span>
            do <span class="paren5">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren6">(<span class="code"><span class="paren1">(<span class="code">glyph <span class="paren2">(<span class="code">case <span class="paren3">(<span class="code">gethash <span class="paren4">(<span class="code">list i y</span>)</span> cave</span>)</span>
                              <span class="paren3">(<span class="code"><span class="keyword">:rest</span> <span class="string">"o"</span></span>)</span>
                              <span class="paren3">(<span class="code"><span class="keyword">:rock</span> <span class="string">"#"</span></span>)</span>
                              <span class="paren3">(<span class="code">t <span class="string">"."</span></span>)</span></span>)</span></span>)</span></span>)</span>
                 <span class="paren6">(<span class="code"><i><span class="symbol">if</span></i> <span class="paren1">(<span class="code">and <span class="paren2">(<span class="code">= y max-y</span>)</span> <span class="paren2">(<span class="code">eql floor <span class="keyword">:floor</span></span>)</span></span>)</span>
                     <span class="paren1">(<span class="code">format t <span class="string">"#"</span></span>)</span>
                     <span class="paren1">(<span class="code">format t <span class="string">"~A"</span> glyph</span>)</span></span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">format t <span class="string">"~%"</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">count <span class="keyword">:rest</span> <span class="paren4">(<span class="code">hash-table-values cave</span>)</span></span>)</span></span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28AOC-3A-40AOC-2E2021-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC:@AOC.2021%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2022.14:@2022.14%20MGL-PAX:SECTION" title="Regolith Reservoir">&#8592;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8593;</a> <a href="#AOC.2021.01:@2021.01%20MGL-PAX:SECTION" title="Sonar Sweep">&#8594;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/main.lisp#L110">&#955;</a></span></span></p>

<h2><a href="#AOC:@AOC.2021%20MGL-PAX:SECTION">6 Advent 2021</a></h2>

<p><a id="x-28AOC-2E2021-2E01-3A-402021-2E01-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.01:@2021.01%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.02:@2021.02%20MGL-PAX:SECTION" title="Dive!">&#8594;</a> <a href="#AOC.2021.01:@2021.01%20MGL-PAX:SECTION" title="Sonar Sweep">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day01.lisp#L7">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.01:@2021.01%20MGL-PAX:SECTION">6.1 Sonar Sweep</a></h3>

<h6>[in package AOC.2021.01 with nicknames 2021.01]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/1" >Day 01</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day01.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     306kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  1266
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  1217
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Into the Depths</p>

<p>For part 1, we'll just be checking how often a depth reading
is increasing from the previous measurement. Pretty straightforward.</p>

<p><a id="x-28AOC-2E2021-2E01-3ACOUNT-DEPTHS-20FUNCTION-29"></a>
<a id="AOC.2021.01:COUNT-DEPTHS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day01.lisp#L54">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.01:COUNT-DEPTHS%20FUNCTION" >COUNT-DEPTHS</a></span></span> <span class="locative-args">SONAR-READINGS</span></span></li>
</ul>

<p><strong>Part 2</strong> - De-noising the Depths</p>

<p>Part 2 extends our initial solution by averaging the depth readings
in a sliding window three at a time. I'm still using a straightforward
loop but the partitioning of the list is ugly. Two options for improvement are:</p>

<ol>
<li><p>Solve the problem in two passes, first generating sums then counting increases.</p></li>
<li><p>Factor out the size of the window, either via callback or some other means.</p></li>
</ol>

<p>Interesting notes after more experiments. I've tried a number of different approaches
to this problem, some that are flexible enough to accommodate both parts of the puzzle
and some that are specialized to the 3-element window of the second part.</p>

<p>Looking at the generic versions that can account for any input size we have 3 speed tiers:</p>

<ol>
<li><p><code>COUNT-DISPLACED-DEPTHS</code> which is depressingly slow due to use of displaced arrays.
   Neat feature that they are, it seems displaced arrays are just plain slow. ~5x slower.</p></li>
<li><p><a href="#AOC.2021.01:COUNT-WINDOWED-DEPTHS%20FUNCTION" title="AOC.2021.01:COUNT-WINDOWED-DEPTHS FUNCTION"><code>COUNT-WINDOWED-DEPTHS</code></a> which uses <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_reduce.htm" title="REDUCE FUNCTION"><code>REDUCE</code></a> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_loop.htm" title="LOOP MGL-PAX:MACRO"><code>LOOP</code></a> to compute the result. ~2.5x-3 slower.</p></li>
<li><p><code>COUNT-INCREASING-SUMS-LOOP</code> which is a direct translation of death's solution using <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_do_do.htm" title="DO MGL-PAX:MACRO"><code>DO</code></a>.
   I often enjoy reviewing death's solutions as he tends to have different ideas than I do
   and I think he has good taste and knowledge of the language. I don't much like <code>DO</code> though.</p></li>
</ol>

<p>It's worth pointing out that my <code>COUNT-WINDOWED-DEPTHS</code> is flexible enough to accept a list or array
as an input. ...Though the performance degrades substantially from ~2.5x slower to 170x slower lol.
This is due to repeated traversals of the input list by reduce.</p>

<p>Notably, it was much easier to write a version using lists instead of arrays that conses <em>and</em>
uses 2 passes but because it is specialized on a 3-element version, it is just as fast as the
fastest generic version. Granted, I haven't tried it on larger inputs. <a href="#AOC.2021.01:COUNT-AVERAGE-DEPTHS%20FUNCTION" title="AOC.2021.01:COUNT-AVERAGE-DEPTHS FUNCTION"><code>COUNT-AVERAGE-DEPTHS</code></a> is
clean and simple but I was curious if I could eliminate the consing and go faster. After some
experimentation, I wound up with <code>COUNT-SHIFTING-DEPTHS</code> which is 4-5x faster than
COUNT-INCREASING-SUMS-LOOP! Very interesting to see how much of a difference
specializing makes in this case.</p>

<p><a id="x-28AOC-2E2021-2E01-3ACOUNT-AVERAGE-DEPTHS-20FUNCTION-29"></a>
<a id="AOC.2021.01:COUNT-AVERAGE-DEPTHS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day01.lisp#L62">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.01:COUNT-AVERAGE-DEPTHS%20FUNCTION" >COUNT-AVERAGE-DEPTHS</a></span></span> <span class="locative-args">SONAR-READINGS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E01-3ACOUNT-WINDOWED-DEPTHS-20FUNCTION-29"></a>
<a id="AOC.2021.01:COUNT-WINDOWED-DEPTHS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day01.lisp#L83">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.01:COUNT-WINDOWED-DEPTHS%20FUNCTION" >COUNT-WINDOWED-DEPTHS</a></span></span> <span class="locative-args">READINGS WINDOW-SIZE</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E02-3A-402021-2E02-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.02:@2021.02%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.01:@2021.01%20MGL-PAX:SECTION" title="Sonar Sweep">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.03:@2021.03%20MGL-PAX:SECTION" title="Binary Diagnostic">&#8594;</a> <a href="#AOC.2021.02:@2021.02%20MGL-PAX:SECTION" title="Dive!">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day02.lisp#L7">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.02:@2021.02%20MGL-PAX:SECTION">6.2 Dive!</a></h3>

<h6>[in package AOC.2021.02 with nicknames 2021.02]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/2" >Day 02</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day02.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     428kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  2117664
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  2073416724
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Plotting the Course</p>

<p><a id="x-28AOC-2E2021-2E02-3APLOT-COURSE-20FUNCTION-29"></a>
<a id="AOC.2021.02:PLOT-COURSE%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day02.lisp#L21">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.02:PLOT-COURSE%20FUNCTION" >PLOT-COURSE</a></span></span> <span class="locative-args">PLAN</span></span></li>
</ul>

<p><strong>Part 2</strong> - One Does Not Simply Dive</p>

<p><a id="x-28AOC-2E2021-2E02-3APLOT-COURSE-AIM-20FUNCTION-29"></a>
<a id="AOC.2021.02:PLOT-COURSE-AIM%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day02.lisp#L33">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.02:PLOT-COURSE-AIM%20FUNCTION" >PLOT-COURSE-AIM</a></span></span> <span class="locative-args">PLAN</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E03-3A-402021-2E03-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.03:@2021.03%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.02:@2021.02%20MGL-PAX:SECTION" title="Dive!">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.04:@2021.04%20MGL-PAX:SECTION" title="Giant Squid">&#8594;</a> <a href="#AOC.2021.03:@2021.03%20MGL-PAX:SECTION" title="Binary Diagnostic">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day03.lisp#L7">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.03:@2021.03%20MGL-PAX:SECTION">6.3 Binary Diagnostic</a></h3>

<h6>[in package AOC.2021.03 with nicknames 2021.03]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/3" >Day 03</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day03.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     255kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  3923414
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:      32kb  Answer:  5852595
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Check the Power Consumption</p>

<p><a id="x-28AOC-2E2021-2E03-3AGET-POWER-CONSUMPTION-20FUNCTION-29"></a>
<a id="AOC.2021.03:GET-POWER-CONSUMPTION%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day03.lisp#L37">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.03:GET-POWER-CONSUMPTION%20FUNCTION" >GET-POWER-CONSUMPTION</a></span></span> <span class="locative-args">NUMS</span></span></li>
</ul>

<p><strong>Part 2</strong> - Verify Life Support</p>

<p><a id="x-28AOC-2E2021-2E03-3AGET-LIFE-SUPPORT-20FUNCTION-29"></a>
<a id="AOC.2021.03:GET-LIFE-SUPPORT%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day03.lisp#L58">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.03:GET-LIFE-SUPPORT%20FUNCTION" >GET-LIFE-SUPPORT</a></span></span> <span class="locative-args">NUMS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E04-3A-402021-2E04-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.04:@2021.04%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.03:@2021.03%20MGL-PAX:SECTION" title="Binary Diagnostic">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.05:@2021.05%20MGL-PAX:SECTION" title="Hydrothermal Venture">&#8594;</a> <a href="#AOC.2021.04:@2021.04%20MGL-PAX:SECTION" title="Giant Squid">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day04.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.04:@2021.04%20MGL-PAX:SECTION">6.4 Giant Squid</a></h3>

<h6>[in package AOC.2021.04 with nicknames 2021.04]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/4" >Day 04</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day04.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     130kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:   3,311kb  Answer:  50008
</code></pre>

<p>Part 2:</p>

<pre><code>Time:  12.001ms  Memory:   8,367kb  Answer:  9280
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Bingo Subsystem</p>

<p><a id="x-28AOC-2E2021-2E04-3APLAY-BINGO-20FUNCTION-29"></a>
<a id="AOC.2021.04:PLAY-BINGO%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day04.lisp#L45">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.04:PLAY-BINGO%20FUNCTION" >PLAY-BINGO</a></span></span> <span class="locative-args">ORDER BOARDS</span></span></li>
</ul>

<p><strong>Part 2</strong> - Let the Squid Win</p>

<p><a id="x-28AOC-2E2021-2E04-3APLAY-BINGO-FINAL-20FUNCTION-29"></a>
<a id="AOC.2021.04:PLAY-BINGO-FINAL%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day04.lisp#L68">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.04:PLAY-BINGO-FINAL%20FUNCTION" >PLAY-BINGO-FINAL</a></span></span> <span class="locative-args">ORDER BOARDS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E05-3A-402021-2E05-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.05:@2021.05%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.04:@2021.04%20MGL-PAX:SECTION" title="Giant Squid">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.06:@2021.06%20MGL-PAX:SECTION" title="Lanternfish">&#8594;</a> <a href="#AOC.2021.05:@2021.05%20MGL-PAX:SECTION" title="Hydrothermal Venture">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day05.lisp#L7">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.05:@2021.05%20MGL-PAX:SECTION">6.5 Hydrothermal Venture</a></h3>

<h6>[in package AOC.2021.05 with nicknames 2021.05]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/5" >Day 05</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day05.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   4.000ms  Memory:     345kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:  20.000ms  Memory:  19,548kb  Answer:  4655
</code></pre>

<p>Part 2:</p>

<pre><code>Time:  28.001ms  Memory:  37,898kb  Answer:  20500
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Overlapping Vents</p>

<p><a id="x-28AOC-2E2021-2E05-3ACOORDINATE-MATCH-3F-20FUNCTION-29"></a>
<a id="AOC.2021.05:COORDINATE-MATCH%3F%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day05.lisp#L24">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.05:COORDINATE-MATCH%3F%20FUNCTION" >COORDINATE-MATCH?</a></span></span> <span class="locative-args">SEGMENT</span></span></li>
</ul>

<p><strong>Part 2</strong> - Diagonal Overlap</p>

<p><a id="x-28AOC-2E2021-2E05-3AFIND-OVERLAPPING-VENTS-20FUNCTION-29"></a>
<a id="AOC.2021.05:FIND-OVERLAPPING-VENTS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day05.lisp#L42">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.05:FIND-OVERLAPPING-VENTS%20FUNCTION" >FIND-OVERLAPPING-VENTS</a></span></span> <span class="locative-args">SEGMENTS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E06-3A-402021-2E06-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.06:@2021.06%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.05:@2021.05%20MGL-PAX:SECTION" title="Hydrothermal Venture">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.07:@2021.07%20MGL-PAX:SECTION" title="The Treachery of Whales">&#8594;</a> <a href="#AOC.2021.06:@2021.06%20MGL-PAX:SECTION" title="Lanternfish">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day06.lisp#L9">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.06:@2021.06%20MGL-PAX:SECTION">6.6 Lanternfish</a></h3>

<h6>[in package AOC.2021.06 with nicknames 2021.06]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/6" >Day 06</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day06.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:      58kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  360761
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  1734242933190511
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - That's a big school</p>

<p><a id="x-28AOC-2E2021-2E06-3ATICK-20FUNCTION-29"></a>
<a id="AOC.2021.06:TICK%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day06.lisp#L25">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.06:TICK%20FUNCTION" >TICK</a></span></span> <span class="locative-args">COUNTS</span></span></li>
</ul>

<p><strong>Part 2</strong> - Uh oh</p>

<p><a id="x-28AOC-2E2021-2E06-3AESTIMATE-POPULATION-20FUNCTION-29"></a>
<a id="AOC.2021.06:ESTIMATE-POPULATION%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day06.lisp#L32">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.06:ESTIMATE-POPULATION%20FUNCTION" >ESTIMATE-POPULATION</a></span></span> <span class="locative-args">COUNTS DAYS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E07-3A-402021-2E07-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.07:@2021.07%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.06:@2021.06%20MGL-PAX:SECTION" title="Lanternfish">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.08:@2021.08%20MGL-PAX:SECTION" title="Seven Segment Search">&#8594;</a> <a href="#AOC.2021.07:@2021.07%20MGL-PAX:SECTION" title="The Treachery of Whales">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day07.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.07:@2021.07%20MGL-PAX:SECTION">6.7 The Treachery of Whales</a></h3>

<h6>[in package AOC.2021.07 with nicknames 2021.07]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/7" >Day 07</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day07.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     166kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  356922
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  100347031
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Do the Crab Claw</p>

<p><a id="x-28AOC-2E2021-2E07-3AALIGN-CRABS-20FUNCTION-29"></a>
<a id="AOC.2021.07:ALIGN-CRABS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day07.lisp#L20">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.07:ALIGN-CRABS%20FUNCTION" >ALIGN-CRABS</a></span></span> <span class="locative-args">POSITIONS COST-FUNCTION TARGET</span></span></li>
</ul>

<p><strong>Part 2</strong> - Crabs Engineer Different</p>

<p><a id="x-28AOC-2E2021-2E07-3AMIN-DISTANCE-GAUSS-20FUNCTION-29"></a>
<a id="AOC.2021.07:MIN-DISTANCE-GAUSS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day07.lisp#L34">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.07:MIN-DISTANCE-GAUSS%20FUNCTION" >MIN-DISTANCE-GAUSS</a></span></span> <span class="locative-args">POSITION I</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E08-3A-402021-2E08-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.08:@2021.08%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.07:@2021.07%20MGL-PAX:SECTION" title="The Treachery of Whales">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.09:@2021.09%20MGL-PAX:SECTION" title="Smoke Basin">&#8594;</a> <a href="#AOC.2021.08:@2021.08%20MGL-PAX:SECTION" title="Seven Segment Search">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day08.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.08:@2021.08%20MGL-PAX:SECTION">6.8 Seven Segment Search</a></h3>

<h6>[in package AOC.2021.08 with nicknames 2021.08]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/8" >Day 08</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day08.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     628kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  493
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   4.000ms  Memory:     223kb  Answer:  1010460
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Count the Easy Ones</p>

<p><a id="x-28AOC-2E2021-2E08-3ACOUNT-UNIQUE-DIGITS-20FUNCTION-29"></a>
<a id="AOC.2021.08:COUNT-UNIQUE-DIGITS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day08.lisp#L26">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.08:COUNT-UNIQUE-DIGITS%20FUNCTION" >COUNT-UNIQUE-DIGITS</a></span></span> <span class="locative-args">ENTRIES &amp;AUX (UNIQUE-LENGTHS (QUOTE (2 3 4 7)))</span></span></li>
</ul>

<p><strong>Part 2</strong> - Decode the Outputs</p>

<p><a id="x-28AOC-2E2021-2E08-3ACOMPUTE-OUTPUT-20FUNCTION-29"></a>
<a id="AOC.2021.08:COMPUTE-OUTPUT%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day08.lisp#L64">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.08:COMPUTE-OUTPUT%20FUNCTION" >COMPUTE-OUTPUT</a></span></span> <span class="locative-args">ENTRY</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E09-3A-402021-2E09-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.09:@2021.09%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.08:@2021.08%20MGL-PAX:SECTION" title="Seven Segment Search">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.10:@2021.10%20MGL-PAX:SECTION" title="Syntax Scoring">&#8594;</a> <a href="#AOC.2021.09:@2021.09%20MGL-PAX:SECTION" title="Smoke Basin">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day09.lisp#L10">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.09:@2021.09%20MGL-PAX:SECTION">6.9 Smoke Basin</a></h3>

<h6>[in package AOC.2021.09 with nicknames 2021.09]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/9" >Day 09</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day09.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     251kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:   1,711kb  Answer:  436
</code></pre>

<p>Part 2:</p>

<pre><code>Time:  32.001ms  Memory:  17,674kb  Answer:  1317792
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Follow the Smoke</p>

<p><a id="x-28AOC-2E2021-2E09-3ASUM-RISK-LEVELS-20FUNCTION-29"></a>
<a id="AOC.2021.09:SUM-RISK-LEVELS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day09.lisp#L63">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.09:SUM-RISK-LEVELS%20FUNCTION" >SUM-RISK-LEVELS</a></span></span> <span class="locative-args">GRID</span></span></li>
</ul>

<p><strong>Part 2</strong> - Dodge the Basins</p>

<p><a id="x-28AOC-2E2021-2E09-3AFIND-LARGEST-BASINS-20FUNCTION-29"></a>
<a id="AOC.2021.09:FIND-LARGEST-BASINS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day09.lisp#L88">[function]</a></span> <span class="reference-object"><a href="#AOC.2021.09:FIND-LARGEST-BASINS%20FUNCTION" >FIND-LARGEST-BASINS</a></span></span> <span class="locative-args">GRID</span></span></li>
</ul>

<p><a id="x-28AOC-2E2021-2E10-3A-402021-2E10-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.10:@2021.10%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.09:@2021.09%20MGL-PAX:SECTION" title="Smoke Basin">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC.2021.11:@2021.11%20MGL-PAX:SECTION" title="Dumbo Octopuses">&#8594;</a> <a href="#AOC.2021.10:@2021.10%20MGL-PAX:SECTION" title="Syntax Scoring">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day10.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.10:@2021.10%20MGL-PAX:SECTION">6.10 Syntax Scoring</a></h3>

<h6>[in package AOC.2021.10 with nicknames 2021.10]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/10" >Day 10</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day10.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     173kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:      80kb  Answer:  392421
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:     144kb  Answer:  2769449099
</code></pre>

<h5><em>Reflections</em></h5>

<p><a id="x-28AOC-2E2021-2E11-3A-402021-2E11-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2021.11:@2021.11%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.10:@2021.10%20MGL-PAX:SECTION" title="Syntax Scoring">&#8592;</a> <a href="#AOC:@AOC.2021%20MGL-PAX:SECTION" title="Advent 2021">&#8593;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8594;</a> <a href="#AOC.2021.11:@2021.11%20MGL-PAX:SECTION" title="Dumbo Octopuses">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2021/day11.lisp#L12">&#955;</a></span></span></p>

<h3><a href="#AOC.2021.11:@2021.11%20MGL-PAX:SECTION">6.11 Dumbo Octopuses</a></h3>

<h6>[in package AOC.2021.11 with nicknames 2021.11]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2021/day/11" >Day 11</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2021/day11.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:      13kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:     831kb  Answer:  1673
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   4.000ms  Memory:   1,391kb  Answer:  179
</code></pre>

<h5><em>Reflections</em></h5>

<p><a id="x-28AOC-3A-40AOC-2E2020-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC:@AOC.2020%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2021.11:@2021.11%20MGL-PAX:SECTION" title="Dumbo Octopuses">&#8592;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8593;</a> <a href="#AOC.2020.01:@2020.01%20MGL-PAX:SECTION" title="Report Repair">&#8594;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/main.lisp#L110">&#955;</a></span></span></p>

<h2><a href="#AOC:@AOC.2020%20MGL-PAX:SECTION">7 Advent 2020</a></h2>

<p><a id="x-28AOC-2E2020-2E01-3A-402020-2E01-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.01:@2020.01%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC.2020.02:@2020.02%20MGL-PAX:SECTION" title="Password Philosophy">&#8594;</a> <a href="#AOC.2020.01:@2020.01%20MGL-PAX:SECTION" title="Report Repair">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day01.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.01:@2020.01%20MGL-PAX:SECTION">7.1 Report Repair</a></h3>

<h6>[in package AOC.2020.01 with nicknames 2020.01]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/1" >Day 01</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day01.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:      49kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  910539
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:      31kb  Answer:  116724144
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Fix the Expense Report</p>

<p><a id="x-28AOC-2E2020-2E01-3AFIND-PAIR-20FUNCTION-29"></a>
<a id="AOC.2020.01:FIND-PAIR%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day01.lisp#L17">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.01:FIND-PAIR%20FUNCTION" >FIND-PAIR</a></span></span> <span class="locative-args">ITEMS</span></span></li>
</ul>

<p><strong>Part 2</strong> - Now in triplicate</p>

<p><a id="x-28AOC-2E2020-2E01-3AFIND-TRIPLE-20FUNCTION-29"></a>
<a id="AOC.2020.01:FIND-TRIPLE%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day01.lisp#L26">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.01:FIND-TRIPLE%20FUNCTION" >FIND-TRIPLE</a></span></span> <span class="locative-args">ITEMS &amp;AUX (HASH (MAKE-HASH-TABLE))</span></span></li>
</ul>

<p><a id="x-28AOC-2E2020-2E02-3A-402020-2E02-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.02:@2020.02%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.01:@2020.01%20MGL-PAX:SECTION" title="Report Repair">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC.2020.03:@2020.03%20MGL-PAX:SECTION" title="Toboggan Trajectory">&#8594;</a> <a href="#AOC.2020.02:@2020.02%20MGL-PAX:SECTION" title="Password Philosophy">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day02.lisp#L7">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.02:@2020.02%20MGL-PAX:SECTION">7.2 Password Philosophy</a></h3>

<h6>[in package AOC.2020.02 with nicknames 2020.02]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/2" >Day 02</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day02.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     749kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:     384kb  Answer:  456
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  308
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Count valid passwords</p>

<p><a id="x-28AOC-2E2020-2E02-3ACOUNT-VALID-20FUNCTION-29"></a>
<a id="AOC.2020.02:COUNT-VALID%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day02.lisp#L21">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.02:COUNT-VALID%20FUNCTION" >COUNT-VALID</a></span></span> <span class="locative-args">ITEMS</span></span></li>
</ul>

<p><strong>Part 2</strong> - Count using XOR</p>

<p><a id="x-28AOC-2E2020-2E02-3ACOUNT-XOR-VALID-20FUNCTION-29"></a>
<a id="AOC.2020.02:COUNT-XOR-VALID%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day02.lisp#L33">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.02:COUNT-XOR-VALID%20FUNCTION" >COUNT-XOR-VALID</a></span></span> <span class="locative-args">ITEMS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2020-2E03-3A-402020-2E03-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.03:@2020.03%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.02:@2020.02%20MGL-PAX:SECTION" title="Password Philosophy">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC.2020.04:@2020.04%20MGL-PAX:SECTION" title="Passport Processing">&#8594;</a> <a href="#AOC.2020.03:@2020.03%20MGL-PAX:SECTION" title="Toboggan Trajectory">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day03.lisp#L7">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.03:@2020.03%20MGL-PAX:SECTION">7.3 Toboggan Trajectory</a></h3>

<h6>[in package AOC.2020.03 with nicknames 2020.03]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/3" >Day 03</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day03.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     186kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  274
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  6050183040
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Count tree collisions</p>

<p><a id="x-28AOC-2E2020-2E03-3ACOUNT-TREES-20FUNCTION-29"></a>
<a id="AOC.2020.03:COUNT-TREES%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day03.lisp#L16">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.03:COUNT-TREES%20FUNCTION" >COUNT-TREES</a></span></span> <span class="locative-args">MAP &amp;KEY (DOWN 1) (RIGHT 3)</span></span></li>
</ul>

<p><strong>Part 2</strong> - Count multiple slopes</p>

<p><a id="x-28AOC-2E2020-2E03-3ACOUNT-COLLISIONS-20FUNCTION-29"></a>
<a id="AOC.2020.03:COUNT-COLLISIONS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day03.lisp#L30">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.03:COUNT-COLLISIONS%20FUNCTION" >COUNT-COLLISIONS</a></span></span> <span class="locative-args">MAP</span></span></li>
</ul>

<p><a id="x-28AOC-2E2020-2E04-3A-402020-2E04-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.04:@2020.04%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.03:@2020.03%20MGL-PAX:SECTION" title="Toboggan Trajectory">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC.2020.05:@2020.05%20MGL-PAX:SECTION" title="Binary Boarding">&#8594;</a> <a href="#AOC.2020.04:@2020.04%20MGL-PAX:SECTION" title="Passport Processing">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day04.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.04:@2020.04%20MGL-PAX:SECTION">7.4 Passport Processing</a></h3>

<h6>[in package AOC.2020.04 with nicknames 2020.04]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/4" >Day 04</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day04.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   4.000ms  Memory:   2,763kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:      32kb  Answer:  256
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:      47kb  Answer:  199
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Check required fields</p>

<p><a id="x-28AOC-2E2020-2E04-3ACOUNT-NON-POLAR-IDS-20FUNCTION-29"></a>
<a id="AOC.2020.04:COUNT-NON-POLAR-IDS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day04.lisp#L24">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.04:COUNT-NON-POLAR-IDS%20FUNCTION" >COUNT-NON-POLAR-IDS</a></span></span> <span class="locative-args">IDS</span></span></li>
</ul>

<p><strong>Part 2</strong> - Validate fields</p>

<p><a id="x-28AOC-2E2020-2E04-3ACOUNT-VALID-PASSPORTS-20FUNCTION-29"></a>
<a id="AOC.2020.04:COUNT-VALID-PASSPORTS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day04.lisp#L83">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.04:COUNT-VALID-PASSPORTS%20FUNCTION" >COUNT-VALID-PASSPORTS</a></span></span> <span class="locative-args">IDS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2020-2E05-3A-402020-2E05-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.05:@2020.05%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.04:@2020.04%20MGL-PAX:SECTION" title="Passport Processing">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC.2020.06:@2020.06%20MGL-PAX:SECTION" title="Custom Customs">&#8594;</a> <a href="#AOC.2020.05:@2020.05%20MGL-PAX:SECTION" title="Binary Boarding">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day05.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.05:@2020.05%20MGL-PAX:SECTION">7.5 Binary Boarding</a></h3>

<h6>[in package AOC.2020.05 with nicknames 2020.05]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/5" >Day 05</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day05.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     235kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:      63kb  Answer:  880
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:     148kb  Answer:  731
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Binary Seat Encoding</p>

<p><a id="x-28AOC-2E2020-2E05-3AHIGHEST-SEAT-ID-20FUNCTION-29"></a>
<a id="AOC.2020.05:HIGHEST-SEAT-ID%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day05.lisp#L34">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.05:HIGHEST-SEAT-ID%20FUNCTION" >HIGHEST-SEAT-ID</a></span></span> <span class="locative-args">PASSES</span></span></li>
</ul>

<p><strong>Part 2</strong> - Find the unoccupied seat</p>

<p><a id="x-28AOC-2E2020-2E05-3AFIND-OPEN-SEAT-20FUNCTION-29"></a>
<a id="AOC.2020.05:FIND-OPEN-SEAT%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day05.lisp#L40">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.05:FIND-OPEN-SEAT%20FUNCTION" >FIND-OPEN-SEAT</a></span></span> <span class="locative-args">PASSES</span></span></li>
</ul>

<p><a id="x-28AOC-2E2020-2E06-3A-402020-2E06-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.06:@2020.06%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.05:@2020.05%20MGL-PAX:SECTION" title="Binary Boarding">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC.2020.07:@2020.07%20MGL-PAX:SECTION" title="Handy Haversacks">&#8594;</a> <a href="#AOC.2020.06:@2020.06%20MGL-PAX:SECTION" title="Custom Customs">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day06.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.06:@2020.06%20MGL-PAX:SECTION">7.6 Custom Customs</a></h3>

<h6>[in package AOC.2020.06 with nicknames 2020.06]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/6" >Day 06</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day06.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     749kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:      80kb  Answer:  6726
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:     128kb  Answer:  3316
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Count any yes answers</p>

<p><a id="x-28AOC-2E2020-2E06-3APARSE-GROUP-20FUNCTION-29"></a>
<a id="AOC.2020.06:PARSE-GROUP%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day06.lisp#L14">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.06:PARSE-GROUP%20FUNCTION" >PARSE-GROUP</a></span></span> <span class="locative-args">GROUP</span></span></li>
</ul>

<p><strong>Part 2</strong> - Count all yes answers</p>

<p><a id="x-28AOC-2E2020-2E06-3ACOUNT-GROUPS-20FUNCTION-29"></a>
<a id="AOC.2020.06:COUNT-GROUPS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day06.lisp#L19">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.06:COUNT-GROUPS%20FUNCTION" >COUNT-GROUPS</a></span></span> <span class="locative-args">GROUPS COMBINE-ROWS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2020-2E07-3A-402020-2E07-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.07:@2020.07%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.06:@2020.06%20MGL-PAX:SECTION" title="Custom Customs">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC.2020.08:@2020.08%20MGL-PAX:SECTION" title="Handheld Halt">&#8594;</a> <a href="#AOC.2020.07:@2020.07%20MGL-PAX:SECTION" title="Handy Haversacks">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day07.lisp#L10">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.07:@2020.07%20MGL-PAX:SECTION">7.7 Handy Haversacks</a></h3>

<h6>[in package AOC.2020.07 with nicknames 2020.07]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/7" >Day 07</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day07.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   4.000ms  Memory:   1,730kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   4.000ms  Memory:      77kb  Answer:  151
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:      52kb  Answer:  41559
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - How many bags can contain a shiny gold bag?</p>

<p><a id="x-28AOC-2E2020-2E07-3ACOUNT-CONTAINERS-20FUNCTION-29"></a>
<a id="AOC.2020.07:COUNT-CONTAINERS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day07.lisp#L39">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.07:COUNT-CONTAINERS%20FUNCTION" >COUNT-CONTAINERS</a></span></span> <span class="locative-args">GRAPH COLOR</span></span></li>
</ul>

<p><strong>Part 2</strong> - How many bags does a shiny gold bag hold?</p>

<p><a id="x-28AOC-2E2020-2E07-3ACOUNT-CONTENTS-20FUNCTION-29"></a>
<a id="AOC.2020.07:COUNT-CONTENTS%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day07.lisp#L52">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.07:COUNT-CONTENTS%20FUNCTION" >COUNT-CONTENTS</a></span></span> <span class="locative-args">COLOR GRAPH</span></span></li>
</ul>

<p><a id="x-28AOC-2E2020-2E08-3A-402020-2E08-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.08:@2020.08%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.07:@2020.07%20MGL-PAX:SECTION" title="Handy Haversacks">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC.2020.09:@2020.09%20MGL-PAX:SECTION" title="Encoding Error">&#8594;</a> <a href="#AOC.2020.08:@2020.08%20MGL-PAX:SECTION" title="Handheld Halt">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day08.lisp#L9">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.08:@2020.08%20MGL-PAX:SECTION">7.8 Handheld Halt</a></h3>

<h6>[in package AOC.2020.08 with nicknames 2020.08]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/8" >Day 08</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day08.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     277kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:      15kb  Answer:  1801
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   8.000ms  Memory:   7,078kb  Answer:  2060
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Find the bootloader error</p>

<p><a id="x-28AOC-2E2020-2E08-3AFINAL-ACC-VALUE-20FUNCTION-29"></a>
<a id="AOC.2020.08:FINAL-ACC-VALUE%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day08.lisp#L53">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.08:FINAL-ACC-VALUE%20FUNCTION" >FINAL-ACC-VALUE</a></span></span> <span class="locative-args">CODE</span></span></li>
</ul>

<p><strong>Part 2</strong> - Fix the bootloader error</p>

<p><a id="x-28AOC-2E2020-2E08-3AAPPLY-PATCH-20FUNCTION-29"></a>
<a id="AOC.2020.08:APPLY-PATCH%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day08.lisp#L66">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.08:APPLY-PATCH%20FUNCTION" >APPLY-PATCH</a></span></span> <span class="locative-args">CODE ADDRESS</span></span></li>
</ul>

<p><a id="x-28AOC-2E2020-2E09-3A-402020-2E09-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2020.09:@2020.09%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.08:@2020.08%20MGL-PAX:SECTION" title="Handheld Halt">&#8592;</a> <a href="#AOC:@AOC.2020%20MGL-PAX:SECTION" title="Advent 2020">&#8593;</a> <a href="#AOC:@AOC.2019%20MGL-PAX:SECTION" title="Advent 2019">&#8594;</a> <a href="#AOC.2020.09:@2020.09%20MGL-PAX:SECTION" title="Encoding Error">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day09.lisp#L8">&#955;</a></span></span></p>

<h3><a href="#AOC.2020.09:@2020.09%20MGL-PAX:SECTION">7.9 Encoding Error</a></h3>

<h6>[in package AOC.2020.09 with nicknames 2020.09]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2020/day/9" >Day 09</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2020/day09.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:     229kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time: 216.005ms  Memory: 156,411kb  Answer:  3199139634
</code></pre>

<p>Part 2:</p>

<pre><code>Time: 1064.023ms  Memory: 372,577kb  Answer:  438559930
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Find vulnerable number</p>

<p><a id="x-28AOC-2E2020-2E09-3AFIND-INVALID-NUMBER-20FUNCTION-29"></a>
<a id="AOC.2020.09:FIND-INVALID-NUMBER%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day09.lisp#L30">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.09:FIND-INVALID-NUMBER%20FUNCTION" >FIND-INVALID-NUMBER</a></span></span> <span class="locative-args">DATA</span></span></li>
</ul>

<p><strong>Part 2</strong> - Break the encryption</p>

<p><a id="x-28AOC-2E2020-2E09-3AFIND-INVALID-SLICE-20FUNCTION-29"></a>
<a id="AOC.2020.09:FIND-INVALID-SLICE%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2020/day09.lisp#L51">[function]</a></span> <span class="reference-object"><a href="#AOC.2020.09:FIND-INVALID-SLICE%20FUNCTION" >FIND-INVALID-SLICE</a></span></span> <span class="locative-args">DATA</span></span></li>
</ul>

<p><a id="x-28AOC-3A-40AOC-2E2019-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC:@AOC.2019%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC.2020.09:@2020.09%20MGL-PAX:SECTION" title="Encoding Error">&#8592;</a> <a href="#AOC:@ADVENT%20MGL-PAX:SECTION" title="Advent of Code">&#8593;</a> <a href="#AOC.2019.01:@2019.01%20MGL-PAX:SECTION" title="The Tyranny of the Rocket Equation">&#8594;</a> <a href="#AOC:@AOC.2019%20MGL-PAX:SECTION" title="Advent 2019">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/main.lisp#L110">&#955;</a></span></span></p>

<h2><a href="#AOC:@AOC.2019%20MGL-PAX:SECTION">8 Advent 2019</a></h2>

<p><a id="x-28AOC-2E2019-2E01-3A-402019-2E01-20MGL-PAX-3ASECTION-29"></a>
<a id="AOC.2019.01:@2019.01%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#AOC:@AOC.2019%20MGL-PAX:SECTION" title="Advent 2019">&#8592;</a> <a href="#AOC:@AOC.2019%20MGL-PAX:SECTION" title="Advent 2019">&#8593;</a> <a href="#AOC.2019.01:@2019.01%20MGL-PAX:SECTION" title="The Tyranny of the Rocket Equation">&#8634;</a> <a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2019/day01.lisp#L7">&#955;</a></span></span></p>

<h3><a href="#AOC.2019.01:@2019.01%20MGL-PAX:SECTION">8.1 The Tyranny of the Rocket Equation</a></h3>

<h6>[in package AOC.2019.01 with nicknames 2019.01]</h6>

<h5><em>Overview</em></h5>

<p>Requirements - <a href="https://adventofcode.com/2019/day/1" >Day 01</a></p>

<p>Solution - <a href="https://github.com/kingcons/advent-of-code/blob/master/src/2019/day01.lisp" >Source on Github</a></p>

<h5><em>Results</em></h5>

<p>Input Parsing:</p>

<pre><code>Time:   0.000ms  Memory:      10kb  
</code></pre>

<p>Part 1:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  3282935
</code></pre>

<p>Part 2:</p>

<pre><code>Time:   0.000ms  Memory:       0kb  Answer:  4921542
</code></pre>

<h5><em>Reflections</em></h5>

<p><strong>Part 1</strong> - Fuel for Modules</p>

<p>Part 1 is just a simple summation problem.
We need to compute the total fuel requirements based on a list of
masses provided. To make things a little interesting I wrote three
variations, one with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_reduce.htm" title="REDUCE FUNCTION"><code>REDUCE</code></a>, one with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_dolist.htm" title="DOLIST MGL-PAX:MACRO"><code>DOLIST</code></a>, and one with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_loop.htm" title="LOOP MGL-PAX:MACRO"><code>LOOP</code></a>.
The different versions were almost equivalent, taking ~10k CPU cycles
and executing in a handful of microseconds. I added a type declaration
to the <code>LOOP</code> version for giggles and saw a ~50% speedup which is reflected
in the disassembly being a tighter 124 bytes compared to 276 bytes for
the <code>DOLIST</code> version and 371 bytes for the functional version.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">read-day-input #'parse-integer</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">time <span class="paren3">(<span class="code">fuel-requirements-3 data</span>)</span></span>)</span></span>)</span>

<span class="comment">;; Evaluation took:
</span><span class="comment">;;   0.000 seconds of real time
</span><span class="comment">;;   0.000002 seconds of total run time (0.000002 user, 0.000000 system)
</span><span class="comment">;;   100.00% CPU
</span><span class="comment">;;   4,426 processor cycles
</span><span class="comment">;;   0 bytes consed</span></span></code></pre>

<p><a id="x-28AOC-2E2019-2E01-3AFUEL-REQUIREMENTS-1-20FUNCTION-29"></a>
<a id="AOC.2019.01:FUEL-REQUIREMENTS-1%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2019/day01.lisp#L69">[function]</a></span> <span class="reference-object"><a href="#AOC.2019.01:FUEL-REQUIREMENTS-1%20FUNCTION" >FUEL-REQUIREMENTS-1</a></span></span> <span class="locative-args">MASSES</span></span></li>
</ul>

<p><a id="x-28AOC-2E2019-2E01-3AFUEL-REQUIREMENTS-2-20FUNCTION-29"></a>
<a id="AOC.2019.01:FUEL-REQUIREMENTS-2%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2019/day01.lisp#L72">[function]</a></span> <span class="reference-object"><a href="#AOC.2019.01:FUEL-REQUIREMENTS-2%20FUNCTION" >FUEL-REQUIREMENTS-2</a></span></span> <span class="locative-args">MASSES</span></span></li>
</ul>

<p><a id="x-28AOC-2E2019-2E01-3AFUEL-REQUIREMENTS-3-20FUNCTION-29"></a>
<a id="AOC.2019.01:FUEL-REQUIREMENTS-3%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2019/day01.lisp#L78">[function]</a></span> <span class="reference-object"><a href="#AOC.2019.01:FUEL-REQUIREMENTS-3%20FUNCTION" >FUEL-REQUIREMENTS-3</a></span></span> <span class="locative-args">MASSES</span></span></li>
</ul>

<p><strong>Part 2</strong> - Fuel for Fuel</p>

<p>To extend the problem, we'll compute a fixed point for the fuel.
Similar to the first part, I wrote a few different variations on this problem.
The first was a classic tail recursive approach and the second used nested <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_loop.htm" title="LOOP MGL-PAX:MACRO"><code>LOOP</code></a>s.</p>

<p>Two interesting notes:</p>

<ul>
<li><p>SBCL seems to generate tighter assembly for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_floorc.htm" title="TRUNCATE FUNCTION"><code>truncate</code></a> than <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_floorc.htm" title="FLOOR FUNCTION"><code>floor</code></a> in many cases.</p></li>
<li><p>Factoring out fuel-for as a separate helper and adding type and optimize declarations there
  keeps the rest of the code clean and gets us the speed benefits of typing in <code>LOOP</code>, etc.</p></li>
</ul>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">data <span class="paren4">(<span class="code">read-day-input #'parse-integer</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">time <span class="paren3">(<span class="code">total-fuel-needed-2 data</span>)</span></span>)</span></span>)</span>

<span class="comment">;; Evaluation took:
</span><span class="comment">;;   0.000 seconds of real time
</span><span class="comment">;;   0.000018 seconds of total run time (0.000017 user, 0.000001 system)
</span><span class="comment">;;   100.00% CPU
</span><span class="comment">;;   42,426 processor cycles
</span><span class="comment">;;   0 bytes consed</span></span></code></pre>

<p><a id="x-28AOC-2E2019-2E01-3ATOTAL-FUEL-NEEDED-1-20FUNCTION-29"></a>
<a id="AOC.2019.01:TOTAL-FUEL-NEEDED-1%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2019/day01.lisp#L85">[function]</a></span> <span class="reference-object"><a href="#AOC.2019.01:TOTAL-FUEL-NEEDED-1%20FUNCTION" >TOTAL-FUEL-NEEDED-1</a></span></span> <span class="locative-args">MASSES</span></span></li>
</ul>

<p><a id="x-28AOC-2E2019-2E01-3ATOTAL-FUEL-NEEDED-2-20FUNCTION-29"></a>
<a id="AOC.2019.01:TOTAL-FUEL-NEEDED-2%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/kingcons/advent-of-code/blob/63a2ed04739120299d00f8663004b97cd135ad3e/src/2019/day01.lisp#L93">[function]</a></span> <span class="reference-object"><a href="#AOC.2019.01:TOTAL-FUEL-NEEDED-2%20FUNCTION" >TOTAL-FUEL-NEEDED-2</a></span></span> <span class="locative-args">MASSES</span></span></li>
</ul>
  </div>
</div>
<script>$('#page-toc').toc({'selectors': 'h1,h2,h3,h4'});</script>
</body>
</html>
